{"version":3,"file":"admin-app.js","mappings":"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","sources":["webpack://agcfw_admin_app/./src/helpers/ajax.ts","webpack://agcfw_admin_app/./src/components/License/index.tsx","webpack://agcfw_admin_app/./src/components/App.tsx","webpack://agcfw_admin_app/./src/index.tsx"],"sourcesContent":["// #region [Variables] =================================================================================================\r\n// #region [Functions]=================================================================================================\r\n/**\r\n * Generic WP AJAX jQuery promise.\r\n *\r\n * @param data IGenericAjaxData\r\n */\r\nexport var wpAjax = function (data) {\r\n    return jQuery.ajax({\r\n        method: \"post\",\r\n        url: ajaxurl,\r\n        data: data,\r\n        dataType: \"json\",\r\n    });\r\n};\r\n/**\r\n * WP AJAX jQuery promise to fetch license data.\r\n *\r\n * @param data any\r\n */\r\nexport var getLicense = function () {\r\n    return jQuery.ajax({\r\n        url: ajaxurl,\r\n        data: { action: \"agcfw_get_license_details\" },\r\n        dataType: \"json\",\r\n    });\r\n};\r\n/**\r\n * WP AJAX jQuery promise to activate license data.\r\n *\r\n * @param data ILicenseData\r\n */\r\nexport var activateLicense = function (data) {\r\n    var _formNonce = agcfwAdminApp.license_page._formNonce;\r\n    return jQuery.ajax({\r\n        method: \"post\",\r\n        url: ajaxurl,\r\n        data: {\r\n            action: \"agcfw_activate_license\",\r\n            \"activation-email\": data.email,\r\n            \"license-key\": data.key,\r\n            \"ajax-nonce\": _formNonce,\r\n        },\r\n        dataType: \"json\",\r\n    });\r\n};\r\n// #endregion [Functions]\r\n","// #region [Imports] ===================================================================================================\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n// Helpers\r\nimport { getLicense, activateLicense } from \"../../helpers/ajax\";\r\n// SCSS\r\nimport \"./index.scss\";\r\nvar _a = acfwpElements.element, useEffect = _a.useEffect, useState = _a.useState, Fragment = _a.Fragment, _b = acfwpElements.antd, Form = _b.Form, Input = _b.Input, Button = _b.Button, Typography = _b.Typography, Skeleton = _b.Skeleton, message = _b.message, CheckCircleFilled = acfwpElements.antdIcons.CheckCircleFilled;\r\n// #endregion [Interfaces]\r\n// #region [Component] =================================================================================================\r\nvar License = function () {\r\n    var _a = useState({ key: false }), license = _a[0], setLicense = _a[1];\r\n    var _b = useState(false), showForm = _b[0], setShowForm = _b[1];\r\n    var _c = useState(false), showSpinner = _c[0], setShowSpinner = _c[1];\r\n    var Link = Typography.Link;\r\n    var form = Form.useForm()[0];\r\n    var _d = agcfwAdminApp.license_page, title = _d.title, about_content = _d.about_content, license_status = _d.license_status, indicator = _d.indicator, specs = _d.specs, formlabels = _d.formlabels, spinner_img = _d.spinner_img;\r\n    useEffect(function () {\r\n        getLicense()\r\n            .done(function (response) {\r\n            if (response.status !== \"success\")\r\n                return;\r\n            setLicense({\r\n                key: response.license_key ? response.license_key : '',\r\n                email: response.email ? response.email : '',\r\n                is_active: response.is_active\r\n            });\r\n        })\r\n            .always(function () { return setShowForm(true); });\r\n    }, [setLicense, setShowForm]);\r\n    var handleActivateLicense = function (data) {\r\n        setShowSpinner(true);\r\n        activateLicense(data)\r\n            .done(function (response) {\r\n            var _a, _b;\r\n            if (response.status === \"success\") {\r\n                message.success(response.success_msg);\r\n                setLicense({\r\n                    key: (_a = data.key) !== null && _a !== void 0 ? _a : '',\r\n                    email: (_b = data.email) !== null && _b !== void 0 ? _b : '',\r\n                    is_active: 'yes'\r\n                });\r\n            }\r\n            else {\r\n                if (['inactive', 'expired'].includes(response.license_status)) {\r\n                    setLicense(__assign(__assign({}, license), { is_active: 'no' }));\r\n                }\r\n                message.error(response.error_msg);\r\n            }\r\n        })\r\n            .always(function () { return setShowSpinner(false); });\r\n    };\r\n    return (acfwpElements.element.createElement(\"div\", { id: \"license-placeholder\" },\r\n        acfwpElements.element.createElement(\"div\", { className: \"overview\" },\r\n            acfwpElements.element.createElement(\"h1\", null, title)),\r\n        acfwpElements.element.createElement(\"div\", { className: \"license-info \".concat(showSpinner ? \"show\" : \"\") },\r\n            acfwpElements.element.createElement(\"div\", { className: \"heading\" },\r\n                acfwpElements.element.createElement(\"div\", { className: \"left\" },\r\n                    acfwpElements.element.createElement(\"span\", null, license_status)),\r\n                acfwpElements.element.createElement(\"div\", { className: \"right\" },\r\n                    acfwpElements.element.createElement(\"span\", { className: \"action-button active-indicator no-hover \".concat(license.is_active == 'yes' ? 'activated' : '') },\r\n                        license.is_active == \"yes\" && acfwpElements.element.createElement(CheckCircleFilled, null),\r\n                        license.is_active == \"yes\" ? indicator.active : indicator.inactive))),\r\n            acfwpElements.element.createElement(\"div\", { className: \"content\" },\r\n                acfwpElements.element.createElement(\"p\", null, about_content),\r\n                acfwpElements.element.createElement(\"table\", { className: \"license-specs\" },\r\n                    acfwpElements.element.createElement(\"thead\", null,\r\n                        acfwpElements.element.createElement(\"tr\", null, specs.map(function (s) { return (acfwpElements.element.createElement(\"th\", { key: s.label }, s.label)); }))),\r\n                    acfwpElements.element.createElement(\"tbody\", null,\r\n                        acfwpElements.element.createElement(\"tr\", null, specs.map(function (s) { return (acfwpElements.element.createElement(\"td\", { key: s.value }, s.value)); }))))),\r\n            acfwpElements.element.createElement(\"div\", { className: \"license-form\" }, showForm ? (acfwpElements.element.createElement(Fragment, null,\r\n                acfwpElements.element.createElement(Form, { layout: \"vertical\", form: form, initialValues: license, onFinish: handleActivateLicense },\r\n                    acfwpElements.element.createElement(Form.Item, { label: formlabels.license_key, name: \"key\" },\r\n                        acfwpElements.element.createElement(Input, { type: \"password\", autocomplete: \"off\" })),\r\n                    acfwpElements.element.createElement(Form.Item, { label: formlabels.email, name: \"email\" },\r\n                        acfwpElements.element.createElement(Input, { type: \"email\", autocomplete: \"off\" })),\r\n                    acfwpElements.element.createElement(Form.Item, { className: \"form-action \".concat(license.is_active == 'yes' ? 'grayed' : '') },\r\n                        acfwpElements.element.createElement(Button, { type: \"primary\", htmlType: \"submit\" }, formlabels.button))),\r\n                acfwpElements.element.createElement(\"div\", { className: \"help-row\" },\r\n                    formlabels.help.text,\r\n                    \" \",\r\n                    acfwpElements.element.createElement(Link, { href: formlabels.help.link, target: \"_blank\" }, formlabels.help.login)))) : (acfwpElements.element.createElement(Skeleton, { loading: true, active: true, paragraph: { rows: 1 } }))),\r\n            acfwpElements.element.createElement(\"div\", { className: \"overlay\" },\r\n                acfwpElements.element.createElement(\"img\", { src: spinner_img, alt: \"spinner\" })))));\r\n};\r\nexport default License;\r\n// #endregion [Component]\r\n","// #region [Imports] ===================================================================================================\r\n// Components\r\nimport License from \"./License\";\r\nvar _a = acfwpElements.element, useState = _a.useState, useEffect = _a.useEffect, store = acfwpElements.appStore.store;\r\n// #endregion [Variables]\r\n// #region [Interfaces]=================================================================================================\r\n// #endregion [Interfaces]\r\nvar AppInit = function () {\r\n    var _a = useState(\"\"), appPage = _a[0], setAppPage = _a[1];\r\n    // set current page state value from ACFW store to local state.\r\n    useEffect(function () {\r\n        if (!appPage)\r\n            setAppPage(store.getState().page);\r\n    }, []);\r\n    // detect page state change from ACFW redux store.\r\n    var handlePageChange = function () {\r\n        var pageValue = store.getState().page;\r\n        if (appPage !== pageValue)\r\n            setAppPage(pageValue);\r\n    };\r\n    // subscribe to any state value changes from ACFW redux store.\r\n    store.subscribe(handlePageChange);\r\n    if (\"acfw-license\" === appPage) {\r\n        return acfwpElements.element.createElement(License, null);\r\n    }\r\n    return null;\r\n};\r\nexport default AppInit;\r\n// #region [Component] =================================================================================================\r\n","// #region [Imports] ===================================================================================================\r\n// Components\r\nimport AppInit from \"./components/App\";\r\n// CSS\r\nimport \"./index.scss\";\r\nvar dom = acfwpElements.dom, _a = acfwpElements.router, BrowserRouter = _a.BrowserRouter, Route = _a.Route, pathPrefix = acfwpElements.pathPrefix, _b = acfwpElements.appStore, Provider = _b.Provider, store = _b.store;\r\n// #endregion [Variables]\r\n// #region [Component] =================================================================================================\r\ndocument.querySelectorAll(\"#agcfw_admin_app\").forEach(function (domContainer) {\r\n    dom.render(acfwpElements.element.createElement(BrowserRouter, null,\r\n        acfwpElements.element.createElement(Route, { path: \"\".concat(pathPrefix, \"admin.php\"), component: AppInit })), domContainer);\r\n});\r\n// #endregion [Component]\r\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","_a","acfwpElements","element","useEffect","useState","Fragment","_b","antd","Form","Input","Button","Typography","Skeleton","message","CheckCircleFilled","antdIcons","key","license","setLicense","showForm","setShowForm","_c","showSpinner","setShowSpinner","Link","form","useForm","_d","agcfwAdminApp","license_page","title","about_content","license_status","indicator","specs","formlabels","spinner_img","jQuery","ajax","url","ajaxurl","data","action","dataType","done","response","status","license_key","email","is_active","always","createElement","id","className","concat","active","inactive","map","label","value","layout","initialValues","onFinish","_formNonce","method","activateLicense","success","success_msg","includes","error","error_msg","Item","name","type","autocomplete","htmlType","button","help","text","href","link","target","login","loading","paragraph","rows","src","alt","store","appStore","appPage","setAppPage","getState","page","subscribe","pageValue","dom","router","BrowserRouter","Route","pathPrefix","Provider","document","querySelectorAll","forEach","domContainer","render","path","component","App"],"sourceRoot":""}