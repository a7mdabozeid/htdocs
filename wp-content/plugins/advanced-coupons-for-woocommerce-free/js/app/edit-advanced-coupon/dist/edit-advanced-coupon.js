(()=>{"use strict";function t(){var t=acfw_edit_coupon.cart_condition_fields,n=acfw_edit_coupon.cart_condition_field_groups,e=acfw_edit_coupon.product_table_buttons,o=acfw_edit_coupon.add_new_and_rule,c=Object.keys(t).map((function(n){return t[n]}));return'\n    <div class="condition-group-actions">\n      <div class="add-condition-form" style="display: none;">\n        <select class="condition-types" data-placeholder="Search/select condition fields">\n          <option value="">Search</option>\n          '.concat(n.map((function(t){return function(t,n){var e=t.group,o=t.label,c=n.filter((function(t){return t.group===e||"others"===e&&void 0===t.group}));if(!c.length)return;return'\n    <optgroup label="'.concat(o,'">\n      ').concat(c.map((function(t){return'<option value="'.concat(t.key,'">').concat(t.title,"</option>")})).join(""),"\n    </optgroup>\n  ")}(t,c)})).join(""),'\n        </select>\n        <button type="button" class="add-condition-field button-primary">').concat(e.add,'</button>\n        <button type="button" class="cancel-add-condition-field button">').concat(e.cancel,'</button>\n      </div>\n      <button type="button" class="add-condition-trigger button">\n        <i class="dashicons dashicons-plus"></i>\n        ').concat(o,"\n      </button>\n    </div>\n  ")}var n=jQuery,e=document.querySelector("#acfw_cart_conditions");function o(){var t=n(this),e=t.closest("div.condition-group-actions");t.hasClass("add-condition-trigger")?(e.find(".add-condition-form").show(),jQuery("select.condition-types").select2(),t.hide()):(e.find(".add-condition-form").hide(),e.find(".add-condition-trigger").show())}function c(t){n(e).data("editing",t),n(e).find("#save-cart-conditions").prop("disabled",!t)}function a(){var t=n(this),o=t.closest(".condition-field"),c=o.find("select.condition-value"),a=t.val()+"",i=o.data("selected_terms"),l=n(e).data("custom_tax_options").filter((function(t){return t.slug==a})),d=l.length?l[0].terms:[];if(c.val(null).find("option").remove(),d.length){for(var s=0,r=d;s<r.length;s++){var u=r[s],p=u.name,f=u.term_id,_=new Option(p,f);c.append(_)}c.val(i).trigger("change")}}function i(){var t=n(this),o=t.closest(".condition-field"),c=o.find("select.condition-value"),a=t.val()+"";if(a){var i=o.data("regions"),l=n(e).data("shipping_regions"),d=o.data("zones")[a].regions;if(c.val(null).find("option").remove(),"object"==typeof d&&d.length){for(var s=0,r=d;s<r.length;s++){var u=r[s],p=new Option(l[u],u);c.append(p)}c.val(i).trigger("change")}}}function l(t,n){void 0===n&&(n=""),n||(n="show");var e="show"===n?"block":"none";jQuery(t).css("display",e)}function d(t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039"};return t.replace(/[&<>"']/g,(function(t){return n[t]}))}function s(){var t=acfw_edit_coupon.decimal_separator,n=jQuery(this),e=n.val()+"";e=="0"+t&&n.val("0"),"0"!=e&&e.substring(0,2)!="0"+t&&(e=(e=e.replace(/^0+/,"")).substring(0,1)==t?"0"+e:e,n.val(e))}function r(t){return"<"==t?1:0}function u(t,n){return t==n?"selected":""}function p(t,n){return t.indexOf(n)>=0?"selected":""}function f(t){void 0===t&&(t="");var n=acfw_edit_coupon.condition_field_options,e=n.exactly,o=n.anyexcept,c=n.morethan,a=n.lessthan;return'\n        <option value="=" '.concat(u(t,"="),">").concat(e,'</option>\n        <option value="!=" ').concat(u(t,"!="),">").concat(o,'</option>\n        <option value=">" ').concat(u(t,">"),">").concat(c,'</option>\n        <option value="<" ').concat(u(t,"<"),">").concat(a,"</option>\n    ")}function _(t){var n=acfw_edit_coupon.decimal_separator;return parseFloat(t.replace(n,"."))}function v(t,n){return"percent"!==t&&"fixed"!==t||0<_(n)}function g(t){void 0===t&&(t="");var n=acfw_edit_coupon.logic_field_options,e=n.and,o=n.or;return'\n        <div class="condition-group-logic">\n            <div class="field-control">\n                <select class="cgroup-logic">\n                    <option value="and" '.concat(u(t,"and"),">").concat(e,'</option>\n                    <option value="or" ').concat(u(t,"or"),">").concat(o,"</option>\n                </select>\n            </div>\n        </div>\n    ")}function h(n){void 0===n&&(n="");var e=acfw_edit_coupon.empty_cart_conditions_field,o=t(),c='<div class="empty-conditions">'.concat(e,"</div>");return'\n        <div class="condition-group '.concat(n?"":"new",'">\n            <a class="remove-condition-group" href="javascript:void(0);">\n                <i class="dashicons dashicons-trash"></i>\n            </a>\n            <div class="condition-group-fields">\n                ').concat(n||c,"\n            </div>\n            ").concat(o,"\n        </div>\n    ")}var y=jQuery;function b(){var t=document.querySelector("#acfw_cart_conditions .condition-data-wrap .condition-groups");y(t).find(".condition-group").length&&y(t).append(g("or")),y(t).find(".no-condition-group").remove(),y(t).append(h()),y(this).blur(),y(t).find(".condition-group.new .add-condition-trigger").trigger("click"),y(t).find(".condition-group").removeClass("new"),c(!0)}function m(){var t=y(this),n=document.querySelector("#acfw_cart_conditions"),e=t.closest(".condition-group"),o=0==e.index()?e.next(".condition-group-logic"):e.prev(".condition-group-logic"),a=acfw_edit_coupon.no_condition_group_msg;e.remove(),o.remove(),y(n).find(".condition-group").length<1&&y(n).find(".condition-groups").append('\n            <div class="no-condition-group">\n                '.concat(a,"\n            </div>\n        ")),c(!0)}function w(t){void 0===t&&(t="");var n=acfw_edit_coupon.logic_field_options,e=n.and,o=n.or;return'<div class="logic-condition-field condition-field" data-type="logic">\n        <div class="field-control">\n            <select class="condition-logic">\n                <option value="and" '.concat(u(t,"and"),">").concat(e,'</option>\n                <option value="or" ').concat(u(t,"or"),">").concat(o,"</option>\n            </select>\n        </div>\n    </div>")}var x=acfw_edit_coupon.cart_condition_fields,q=acfw_edit_coupon.condition_field_options;function k(t){var n=t.value,e=t.condition,o=t.quantity,c=x.product_category,a=c.title,i=c.placeholder,l=c.field,d=x.cart_quantity.field,s=acfw_edit_coupon.condition_label,r=q.exactly,u=q.anyexcept,f=q.morethan,_=q.lessthan,v=e||">";return'\n    <div class="product-category-field condition-field" data-type="product-category">\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n        <h3 class="condition-field-title">'.concat(a,'</h3>\n        <div class="field-control categories">\n            <label>').concat(l,'</label>\n            <select class="condition-value wc-enhanced-select" multiple data-placeholder="').concat(i,'">\n                ').concat(function(t){void 0===t&&(t=[]);var n=x.product_category.options,e="";for(var o in n)e+='<option value="'.concat(o,'" ').concat(p(t,o),">").concat(n[o],"</option>");return e}(n),'\n            </select>\n        </div>\n        <div class="field-control condition">\n            <label>').concat(s,'</label>\n            <select class="condition-select">\n                <option value="=" ').concat("="==v?"selected":"",">").concat(r,'</option>\n                <option value="!=" ').concat("!="==v?"selected":"",">").concat(u,'</option>\n                <option value=">" ').concat(">"==v?"selected":"",">").concat(f,'</option>\n                <option value="<" ').concat("<"==v?"selected":"",">").concat(_,'</option>\n            </select>\n        </div>\n        <div class="field-control quantity">\n            <label>').concat(d,'</label>\n            <input type="number" class="condition-quantity" value="').concat(o,'" min="').concat("<"==e?1:0,'">\n        </div>\n    </div>\n    ')}var j=acfw_edit_coupon.cart_condition_fields;function S(t){var n=j.customer_logged_in_status.title;return'\n        <div class="customer-logged-in-status-field condition-field" data-type="customer-logged-in-status">\n\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n\n        <h3 class="condition-field-title">'.concat(n,'</h3>\n\n        <div class="field-control">\n            <select class="condition-value">\n                ').concat(function(t){var n=j.customer_logged_in_status.options,e="";for(var o in n)e+='<option value="'.concat(o,'" ').concat(u(o,t),">").concat(n[o],"</option>");return e}(t),"\n            </select>\n        </div>\n    </div>")}var C=acfw_edit_coupon.cart_condition_fields;function O(t){var n=C.customer_user_role,e=n.title,o=n.placeholder;return'\n        <div class="customer-user-role-field condition-field" data-type="customer-user-role">\n            <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n            <h3 class="condition-field-title">'.concat(e,'</h3>\n            <div class="field-control">\n                <select class="wc-enhanced-select condition-value" multiple data-placeholder="').concat(o,'">\n                    ').concat(function(t){var n=acfw_edit_coupon.user_role_options,e="";for(var o in n)e+='<option value="'.concat(o,'" ').concat(p(t,o),">").concat(n[o],"</option>");return e}(t),"\n                </select>\n            </div>\n        </div>\n    ")}var Q=acfw_edit_coupon.cart_condition_fields;function N(t){var n=Q.disallowed_customer_user_role,e=n.title,o=n.placeholder;return'\n        <div class="disallowed-customer-user-role-field condition-field" data-type="disallowed-customer-user-role">\n            <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n            <h3 class="condition-field-title">'.concat(e,'</h3>\n            <div class="field-control">\n                <select class="wc-enhanced-select condition-value" multiple data-placeholder="').concat(o,'">\n                    ').concat(function(t){var n=acfw_edit_coupon.user_role_options,e="";for(var o in n)e+='<option value="'.concat(o,'" ').concat(p(t,o),">").concat(n[o],"</option>");return e}(t),"\n                </select>\n            </div>\n        </div>\n    ")}var I=acfw_edit_coupon.cart_condition_fields;var M=jQuery,J=acfw_edit_coupon.cart_condition_fields,D=acfw_edit_coupon.upsell;function T(){var t=M(this),n=t.closest(".condition-group-actions").find("select.condition-types"),e=t.closest(".condition-group"),o=e.find(".condition-group-fields"),a=document.querySelector("#acfw_cart_conditions .acfw-overlay"),i=M("#acfw_cart_conditions").data("premium-conditions"),d=n.val()+"",s=o.find(".condition-field,.condition-set").length;if(l(a,"show"),i&&i.indexOf(d)>-1)vex.dialog.alert({unsafeMessage:D.cart_condition_field});else{var r=A(d,null,s);r?(o.find(".empty-conditions").remove(),o.show().append(r),o.find(".".concat(d,"-field")).find("input,select").trigger("change"),M("body").trigger("wc-enhanced-select-init"),c(!0)):vex.dialog.alert(acfw_edit_coupon.fail_add_condition_field)}l(a,"hide"),e.find(".condition-group-actions .add-condition-form").hide(),e.find(".condition-group-actions .add-condition-trigger").show()}function P(){var t=M(this).closest(".condition-field,.condition-set"),n=t.closest(".condition-group"),e=0==t.index()?t.next(".logic-condition-field"):t.prev(".logic-condition-field"),o=acfw_edit_coupon.empty_cart_conditions_field;t.remove(),e.remove(),n.find(".condition-field,.condition-set").length<1&&n.find(".condition-group-fields").append('\n            <div class="empty-conditions">\n                '.concat(o,"\n            </div>\n        ")),c(!0)}function A(t,n,e){void 0===n&&(n=null),void 0===e&&(e=0);var o="";switch(t){case"product-category":(n=n||{}).length&&(n={condition:">",value:n,quantity:0}),o+=k(n);break;case"customer-logged-in-status":o+=S(n);break;case"customer-user-role":o+=O(n=n||[]);break;case"disallowed-customer-user-role":o+=N(n=n||[]);break;case"cart-quantity":o+=function(t){var n=t.condition,e=t.value,o=I.cart_quantity,c=o.title,a=o.desc,i=o.field,l=acfw_edit_coupon.condition_label;return'\n    <div class="cart-quantity-field condition-field" data-type="cart-quantity">\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n        <h3 class="condition-field-title">'.concat(c,"</h3>\n        <label>").concat(a,'</label>\n        <div class="field-control">\n            <label>').concat(l,'</label>\n            <select class="condition-select">\n                ').concat(f(n),'\n            </select>\n        </div>\n        <div class="field-control">\n            <label>').concat(i,'</label>\n            <input class="condition-value" type="number" min="0" value="').concat(e>=0?e:"",'">\n        </div>\n    </div>\n    ')}(n=n||{});break;case"cart-subtotal":o+=function(t){var n=t.condition,e=t.value,o=acfw_edit_coupon.cart_condition_fields,c=acfw_edit_coupon.condition_label,a=o.cart_subtotal,i=a.title,l=a.desc,d=a.field;return'\n    <div class="cart-subtotal-field condition-field" data-type="cart-subtotal">\n        <a class="remove-condition-field" href="javascript:void(0);"><i class="dashicons dashicons-trash"></i></a>\n        <h3 class="condition-field-title">'.concat(i,"</h3>\n        <label>").concat(l,'</label>\n        <div class="field-control">\n            <label>').concat(c,'</label>\n            <select class="condition-select">\n                ').concat(f(n),'\n            </select>\n        </div>\n        <div class="field-control">\n            <label>').concat(d,'</label>\n            <input class="condition-value wc_input_price" type="text" value="').concat(e||"",'">\n        </div>\n    </div>\n    ')}(n=n||{});break;default:var c=t.replace(/-/g,"_");if(J[c]){var a=J[c],i=a.template_callback,l=a.default_data_value;l&&(n=n||l),i&&(o+=i(n,c))}}return o&&e?w()+o:o}function H(t){return acfw_edit_coupon.cart_conditon_field_options.indexOf(t)>-1}var W=jQuery,F=acfw_edit_coupon.cart_condition_fields;function Y(t){var n=t.querySelectorAll(".condition-set,.condition-field"),e=[];return t.classList.contains("condition-group-logic")?{type:"group_logic",value:t.querySelector("select").value}:(n.forEach((function(t){return e.push(function(t){var n,e,o,c=t.dataset.type,a={type:c,data:null};switch(c){case"logic":n=t.querySelector("select.condition-logic"),a.data=n.value;break;case"product-category":n=t.querySelector(".condition-value"),e=t.querySelector(".condition-select"),o=t.querySelector(".condition-quantity"),a.data={condition:W(e).val(),value:W(n).val(),quantity:W(o).val()};break;case"customer-logged-in-status":case"customer-user-role":case"disallowed-customer-user-role":n=t.querySelector(".condition-value"),a.data=W(n).val();break;case"cart-quantity":case"cart-subtotal":n=t.querySelector(".condition-select"),e=t.querySelector(".condition-value"),a.data={condition:W(n).val(),value:"cart-subtotal"==c?W(e).val():parseInt(W(e).val())};break;default:var i=c.replace(/-/g,"_");if(F[i]){var l=F[i].scraper_callback;a.data=l(t)}}return a}(t))})),e.length?{type:"group",fields:e}:null)}var z=jQuery,E=woocommerce_admin_meta_boxes.post_id;function L(){var t=document.querySelector("#acfw_cart_conditions"),n=t.querySelectorAll(".condition-groups .condition-group, .condition-groups .condition-group-logic"),e=t.querySelector(".acfw-overlay"),o=acfw_edit_coupon.post_status,a=woocommerce_admin_meta_boxes.post_id,i=[];if(z(t).find(".acfw-styled-table tr.add-edit-form button.cancel").trigger("click"),n.forEach((function(t){var n=Y(t);n&&i.push(n)})),!function(t){var n,e,o,c,a,i,l,d,s;if(1===t.length&&(null===(n=t[0].fields)||void 0===n?void 0:n.length)<1)return!0;for(var u="",p=0,f=t;p<f.length;p++)if("group_logic"!==(e=f[p]).type){if(u=e.type,void 0===e.fields||e.fields.length<1)return!1;for(var _=0,v=e.fields;_<v.length;_++){if(a=(o=v[_]).type,void 0===(c=o.data)||""===c||null===c)return!1;if("object"==typeof c&&"number"==typeof c.length?i=c:"product-category"===a?(i=c.value,l=c.condition,d=c.quantity):"object"==typeof c&&void 0===c.length?(i=c.products,l=c.condition,d=c.value):d=c,s=r(l),void 0!==i&&i.length<1||void 0!==l&&!l||!Number.isInteger(d)&&void 0!==d&&!d||Number.isInteger(d)&&d<s||"number"==typeof d&&d<s)return!1}}else{if(!u||"group_logic"===u)return!1;u="group_logic"}return!0}(i))return vex.dialog.alert(acfw_edit_coupon.cart_conditions_invalid),void z(t).addClass("save-error");var d={message:z(t).find(".text-input.non-qualifying-message-field").val(),btn_text:z(t).find(".text-input.non-qualifying-btn-text-field").val(),btn_url:z(t).find(".text-input.non-qualifying-btn-url-field").val()},s=z(t).find(".display-notice-auto-apply-field").is(":checked")?"yes":"";if(d.btn_url&&!/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(d.btn_url))return vex.dialog.alert(acfw_edit_coupon.cart_notice_url_invalid),void z(t).addClass("save-error");l(e,"show"),U({cart_conditions:i,notice_settings:d,auto_apply_display:s},(function(n){"success"==n.status?"publish"!==o&&(z("input[name='post_title']").val()||z("input[name='post_title']").val("coupon-"+a),z("select[name='post_status']").append(new Option("Published","publish")).val("publish"),z("#publishing-action").append('\n                    <input type="hidden" name="publish" value="Publish">\n                '),z("input#publish").click()):n.error_msg&&vex.dialog.alert(n.error_msg),c(!1),z(t).find("#save-cart-conditions").prop("disabled",!0),l(e,"hide")}))}function V(t){var n=document.querySelector("#acfw_cart_conditions");z(n).data("editing")&&(t.preventDefault(),z(n).find("#save-cart-conditions").trigger("click"),setTimeout((function(){z(n).hasClass("save-error")?z(n).removeClass("save-error"):z("form#post").submit()}),1e3))}function U(t,n){return t.action="acfw_save_cart_conditions",t.coupon_id=E,z.post(ajaxurl,t,n,"json")}var B=jQuery,K=acfw_edit_coupon.product_table_buttons,G=acfw_edit_coupon.condition_field_options,R=acfw_edit_coupon.bogo_form_fields;function X(){var t=B(this).closest(".acfw-styled-table"),n=t.find("tbody"),e=t.data("exclude");n.find("tr.no-result").remove(),n.append(ot(e)),B("body").trigger("wc-enhanced-select-init")}function Z(){var t=B(this),n=t.closest("tr"),e=t.closest("table"),o=n.closest("tbody"),c=n.find("td.product").data("product"),a=e.data("exclude");a.splice(a.indexOf(c.product_id),1),o.find("tr.no-result").remove(),n.replaceWith(ot(a,c)),e.data("exclude",a),e.find(".wc-product-search").data("exclude",a),B("body").trigger("wc-enhanced-select-init")}function $(){var t=B(this),n=t.closest("tr"),e=t.closest("table.acfw-styled-table"),o=n.find(".wc-product-search"),a=n.find(".condition-select"),i=n.find(".condition-quantity"),l="<"===a.val()?1:0,s=e.data("exclude");if(o.val()&&a.val()&&i.val()&&!(i.val()<l)){var r=parseInt(o.val().toString());if(s.includes(r))vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);else{var u={product_id:r,condition:a.val(),quantity:parseInt(i.val()+""),product_label:o.find("option:selected").text(),condition_label:a.find("option:selected").text()},p='\n        <tr>\n            <td class="product" data-product="'.concat(d(JSON.stringify(u)),'">').concat(u.product_label,'</td>\n            <td class="condition">').concat(u.condition_label,'</td>\n            <td class="quantity">').concat(u.quantity,'</td>\n            <td class="actions">\n                <a class="edit" href="javascript:void(0)"><span class="dashicons dashicons-edit"></span></a>\n                <a class="remove" href="javascript:void(0)"><span class="dashicons dashicons-no"></span></a>\n            </td>\n        </tr>\n    ');s.push(u.product_id),n.replaceWith(p),e.data("exclude",s),e.find(".wc-product-search").data("exclude",s),c(!0)}}else vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg)}function tt(){var t=jQuery(this),n=t.closest("tr"),e=t.closest("table"),o=n.closest("tbody"),c=n.find("td.product").data("product"),a=n.find("td").length,i=e.data("exclude");if(i.includes(c.product_id))vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);else if("object"==typeof c){var l=c.product_id,s=c.product_label,r=c.condition_label,u=c.quantity,p='\n            <tr>\n                <td class="product" data-product="'.concat(d(JSON.stringify(c)),'">').concat(s,'</td>\n                <td class="condition">').concat(r,'</td>\n                <td class="quantity">').concat(u,'</td>\n                <td class="actions">\n                    <a class="edit" href="javascript:void(0)"><span class="dashicons dashicons-edit"></span></a>\n                    <a class="remove" href="javascript:void(0)"><span class="dashicons dashicons-no"></span></a>\n                </td>\n            </tr>\n        ');i.push(l),n.replaceWith(p),e.data("exclude",i),e.find(".wc-product-search").data("exclude",i)}else n.remove(),et(o,a)}function nt(){var t=jQuery(this).closest("tr"),n=t.closest("table"),e=n.find("tbody"),o=t.find("td").length;t.remove();var a=t.find("td.product").data("product"),i=n.data("exclude"),l=i.indexOf(parseInt(a.product_id));-1!==l&&i.splice(l,1),n.data("exclude",i),n.find(".wc-product-search").data("exclude",i),et(e,o),c(!0)}function et(t,n){void 0===n&&(n=3),t.find("tr").length>0||t.append('\n        <tr class="no-result">\n            <td colspan="'.concat(n,'">').concat(acfw_edit_coupon.no_products_added,"</td>\n        </tr>\n    "))}function ot(t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var e="",o="";if("object"==typeof n){var c=n.product_id,a=n.product_label;e='<option value="'.concat(c,'">').concat(a,"</option>"),o=n.condition}var i=K.add,l=K.edit,s=K.cancel,r=G.exactly,u=G.anyexcept,p=G.morethan,f=G.lessthan,_=R.type_to_search,v="object"==typeof n?l:i;return'\n        <tr class="add-edit-form adding">\n            <td class="product" data-product="'.concat("object"==typeof n?d(JSON.stringify(n)):0,'">\n                <div class="object-search-wrap">\n                    <select class="product-in-cart wc-product-search"\n                        data-placeholder="').concat(_,'"\n                        data-action="acfw_search_products"\n                        data-exclude="').concat(d(JSON.stringify(t)),'">').concat(e,'</select>\n                </div>\n            </td>\n            <td class="condition">\n                <select class="condition-select">\n                    <option value="=" ').concat("="==o?"selected":"",">").concat(r,'</option>\n                    <option value="!=" ').concat("!="==o?"selected":"",">").concat(u,'</option>\n                    <option value=">" ').concat(">"==o?"selected":"",">").concat(p,'</option>\n                    <option value="<" ').concat("<"==o?"selected":"",">").concat(f,'</option>\n                </select>\n            </td>\n            <td class="quantity">\n                <input type="number" class="condition-quantity" value="').concat("object"==typeof n?n.quantity:1,'" min="').concat("<"==o?1:0,'">\n            </td>\n            <td class="actions">\n                <button type="button" class="condition-product-add button-primary">').concat(v,'</button>\n                <button type="button" class="cancel button">').concat(s,"</button>\n            </td>\n        </tr>\n        ")}var ct=jQuery;function at(){var t=ct(this),n=parseInt(t.attr("min"));parseFloat(t.val()+"")<n&&t.val(n)}function it(){var t=ct(this),n=t.closest(".condition-field,.condition-set"),e=n.data("type"),o="product-quantity"==e||"has-ordered-before"==e||"product-category"==e?"input.condition-quantity":"input.condition-value",c=n.find(o),a=r(t.val()+"");c.attr("min",a).trigger("change")}function lt(){var t=acfw_edit_coupon.within_a_period_label,n=acfw_edit_coupon.number_of_orders_label,e=ct(this),o=e.closest(".cart-quantity-field").find(".condition-type-value label");"within-a-period"==e.val()?o.text(t):o.text(n)}function dt(){var t=ct(this),n=t.closest(".condition-field").find("select.condition-select"),e=n.val()+"",o=t.val()+"",c=r(e);"."!==acfw_edit_coupon.decimal_separator&&(o=o.replace(acfw_edit_coupon.decimal_separator,".")),!n||parseFloat(o)>c-1||t.val(c)}function st(){var t=ct(this),n=t.val();n=="0"+acfw_edit_coupon.decimal_separator&&t.val("0"),"0"!=n&&n.substring(0,2)!="0"+acfw_edit_coupon.decimal_separator&&(n=(n=n.replace(/^0+/,"")).substring(0,1)==acfw_edit_coupon.decimal_separator?"0"+n:n,t.val(n))}function rt(){var t=ct(this),n=t.closest(".condition-field"),e=n.find("select.condition-select"),o=n.find("input.condition-value");switch(t.val()){case"string":o.prop("type","text"),o.removeClass("wc_input_price"),">"!=e.val()&&"<"!=e.val()||e.val("="),e.find("option[value='>'],option[value='<']").prop("disabled",!0);break;case"number":o.prop("type","number"),o.removeClass("wc_input_price"),e.find("option[value='>'],option[value='<']").prop("disabled",!1);break;case"price":o.prop("type","text"),o.addClass("wc_input_price"),e.find("option[value='>'],option[value='<']").prop("disabled",!1)}e.trigger("change")}var ut=jQuery;function pt(){var t=ut(this),n=t.closest(".woocommerce").find("#acfw_cart_conditions"),e=t.data("tab");n.find(".panel").hide(),n.find('.panel[data-tab="'.concat(e,'"]')).show(),function(t){ut(".acfw-cart-condition-tabs li").removeClass("active"),t.closest("li").addClass("active")}(t)}var ft=function(t,n,e,o){return new(e||(e=Promise))((function(c,a){function i(t){try{d(o.next(t))}catch(t){a(t)}}function l(t){try{d(o.throw(t))}catch(t){a(t)}}function d(t){var n;t.done?c(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,l)}d((o=o.apply(t,n||[])).next())}))},_t=function(t,n){var e,o,c,a,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,o&&(c=2&a[0]?o.return:a[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,a[1])).done)return c;switch(o=0,c&&(a=[2&a[0],c.value]),a[0]){case 0:case 1:c=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(c=i.trys,(c=c.length>0&&c[c.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!c||a[1]>c[0]&&a[1]<c[3])){i.label=a[1];break}if(6===a[0]&&i.label<c[1]){i.label=c[1],c=a;break}if(c&&i.label<c[2]){i.label=c[2],i.ops.push(a);break}c[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],o=0}finally{e=c=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},vt=jQuery,gt=document.querySelector("#acfw_cart_conditions");function ht(){var t=this,n=gt.querySelector(".condition-groups"),e=vt(gt).data("cart_conditions");ft(t,void 0,void 0,(function(){var t,o,c,a,i;return _t(this,(function(l){if(t="",e.length)for(o=0,c=e;o<c.length;o++)"group"==(a=c[o]).type?(i=yt(a.fields),t+=h(i)):t+=g(a.value);else t=h();return vt(n).html(t),vt(n).find("input,select").trigger("change"),vt(n).find(".condition-group.new .add-condition-trigger").trigger("click"),vt(n).find(".condition-group").removeClass("new"),[2]}))})).then((function(){setTimeout((function(){return vt("body").trigger("wc-enhanced-select-init")}),1500),c(!1)}))}function yt(t){for(var n="",e="",o=!0,c=0,a=t;c<a.length;c++){var i=a[c],l=i.type,d=i.data;if(H(l))if("logic"!=l){var s=A(l,d);s?(n+=e+s,o=!0):o=!1,e=""}else e=o?w(d):"";else o=!1}return n}function bt(){var t=acfw_edit_coupon.upsell;return t?'\n    <div class="upsell">\n        '.concat(t.bogo_deals_type,"\n    </div>"):""}function mt(t,n){void 0===n&&(n=!1);var e=t.products,o=t.quantity,c=t.discount_type,a=t.discount_value,i=acfw_edit_coupon.bogo_form_fields,l=acfw_edit_coupon.bogo_instructions,s=i.quantity,r=i.products,u=i.price_discount,p=i.type_to_search,f=c?t.discount_type:"override",_=n?function(t,n){void 0===n&&(n="0");var e=acfw_edit_coupon.currency_symbol,o=acfw_edit_coupon.discount_field_options,c=o.override,a=o.percent,i=o.fixed;return'\n    <td class="price">\n        <div>\n        <select class="discount_type">\n            <option value="override" '.concat("override"==t?"selected":"",">").concat(e," : ").concat(c,'</option>\n            <option value="percent" ').concat("percent"==t?"selected":"",">% : ").concat(a,'</option>\n            <option value="fixed" ').concat("fixed"==t?"selected":"",">-").concat(e," : ").concat(i,'</option>\n        </select>\n        <input type="text" class="discount_value short wc_input_price" value="').concat(n,'">\n        </div>\n    </td>\n    ')}(f,a):"",v=n?'<th class="price">'.concat(u,"</th>"):"",g=function(t){if("object"!=typeof t||!t.length)return;for(var n="",e=0,o=t;e<o.length;e++){var c=o[e];n+='<option value="'.concat(c.product_id,'" selected>').concat(c.label,"</option>")}return n}(e),h=n?"".concat(l.apply_default," ").concat(l.multiple_items):l.trigger_default;return'\n      <p class="instructions">'.concat(h,'</p>\n      <table class="acfw-styled-table combined-objects-form" \n          data-combined="').concat(d(JSON.stringify(t)),'"\n          data-isdeals="').concat(n,'"\n          data-type="product">\n          <thead>\n              <tr>\n                  <th class="objects-list">').concat(r,'</th>\n                  <th class="quantity">').concat(s,"</th>\n                  ").concat(v,'\n              </tr>\n          </thead>\n          <tbody>\n              <tr>\n                  <td class="objects-list object">\n                      <select class="combined-products-list wc-product-search"\n                      data-placeholder="').concat(p,'"\n                      data-action="acfw_search_products"\n                      data-exclude="" multiple>').concat(g,'</select>\n                  </td>\n                  <td class="quantity">\n                      <input type="number" class="condition-quantity" value="').concat(o,'" min="1">\n                  </td>\n                  ').concat(_,"\n              </tr>\n          </tbody>\n      </table>\n      ").concat(bt(),"\n    ")}function wt(t,n){void 0===n&&(n=!1);var e=t.categories,o=t.quantity,c=t.discount_type,a=t.discount_value,i=acfw_edit_coupon.bogo_form_fields,l=acfw_edit_coupon.bogo_instructions,s=i.quantity,r=i.categories,u=i.price_discount,p=i.type_to_search,f=c?t.discount_type:"override",_=n?function(t,n){void 0===n&&(n="0");var e=acfw_edit_coupon.currency_symbol,o=acfw_edit_coupon.discount_field_options,c=o.override,a=o.percent,i=o.fixed;return'\n    <td class="price">\n        <div>\n        <select class="discount_type">\n            <option value="override" '.concat("override"==t?"selected":"",">").concat(e," : ").concat(c,'</option>\n            <option value="percent" ').concat("percent"==t?"selected":"",">% : ").concat(a,'</option>\n            <option value="fixed" ').concat("fixed"==t?"selected":"",">-").concat(e," : ").concat(i,'</option>\n        </select>\n        <input type="text" class="discount_value short wc_input_price" value="').concat(n,'">\n        </div>\n    </td>\n    ')}(f,a):"",v=n?'<th class="price">'.concat(u,"</th>"):"",g=function(t){if("object"!=typeof t||!t.length)return;for(var n="",e=0,o=t;e<o.length;e++){var c=o[e];n+='<option value="'.concat(c.category_id,'" selected>').concat(c.label,"</option>")}return n}(e),h=n?"".concat(l.apply_default," ").concat(l.multiple_items):l.trigger_default;return'\n      <p class="instructions">'.concat(h,'</p>\n      <table class="acfw-styled-table combined-objects-form" \n          data-combined="').concat(d(JSON.stringify(t)),'"\n          data-isdeals="').concat(n,'"\n          data-type="category">\n          <thead>\n              <tr>\n                  <th class="objects-list">').concat(r,'</th>\n                  <th class="quantity">').concat(s,"</th>\n                  ").concat(v,'\n              </tr>\n          </thead>\n          <tbody>\n              <tr>\n                  <td class="objects-list object">\n                      <select class="product-categories-list wc-product-search"\n                      data-placeholder="').concat(p,'"\n                      data-action="acfw_search_product_category"\n                      data-exclude="" multiple>').concat(g,'</select>\n                  </td>\n                  <td class="quantity">\n                      <input type="number" class="condition-quantity" value="').concat(o,'" min="1">\n                  </td>\n                  ').concat(_,"\n              </tr>\n          </tbody>\n      </table>\n      ").concat(bt(),"\n    ")}function xt(t){var n=t.product_id,e=t.product_label;return'\n    <td class="product product-'.concat(n,' object" data-product="').concat(d(JSON.stringify(t)),'">\n        ').concat(e,"\n    </td>\n    ")}function qt(t,n){void 0===t&&(t=3),void 0===n&&(n="product");var e=acfw_edit_coupon.no_products_added,o=acfw_edit_coupon.no_categories_added;return'\n    <tr class="no-result">\n        <td colspan="'.concat(t,'">').concat("category"==n?o:e,"</td>\n    </tr>\n    ")}function kt(t,n){return void 0===t&&(t="override"),void 0===n&&(n="0"),'<td class="price">\n    ('.concat(t,") ").concat(n,"\n  </td>")}function jt(t,n){return void 0===n&&(n=!1),n?function(t){var n=t.quantity,e=t.discount_type,o=t.discount_value,c=acfw_edit_coupon.currency_symbol,a=acfw_edit_coupon.discount_field_options,i=acfw_edit_coupon.bogo_form_fields,l=acfw_edit_coupon.bogo_instructions,s=a.override,r=a.percent,u=a.fixed,p=i.quantity,f=i.price_discount,_=i.discount_type,v=e?t.discount_type:"override";return'\n    <p class="instructions">'.concat(l.anyproducts_apply,'</p>\n    <table class="acfw-styled-table any-products-apply-form any-products-form" data-anyproducts="').concat(d(JSON.stringify(t)),'">\n      <thead>\n        <tr>\n          <th class="quantity">').concat(p,'</th>\n          <th class="type">').concat(_,'</th>\n          <th class="price">').concat(f,'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="quantity object">\n            <input type="number" class="condition-quantity" value="').concat(null!=n?n:"1",'" min="1">\n          </td>\n          <td class="type">\n            <select class="discount_type">\n              <option value="override" ').concat("override"==v?"selected":"",">").concat(c," : ").concat(s,'</option>\n              <option value="percent" ').concat("percent"==v?"selected":"",">% : ").concat(r,'</option>\n              <option value="fixed" ').concat("fixed"==v?"selected":"",">-").concat(c," : ").concat(u,'</option>\n            </select>\n          </td>\n          <td class="price">\n            <input type="text" class="discount_value short wc_input_price" value="').concat(null!=o?o:"0",'">\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    ').concat(bt(),"\n  ")}(t):function(t){var n=t.quantity,e=acfw_edit_coupon.bogo_instructions,o=acfw_edit_coupon.bogo_form_fields;return'\n    <p class="instructions">'.concat(e.anyproducts_trigger,'</p>\n    <div class="any-products-trigger-form any-products-form" data-anyproducts="').concat(d(JSON.stringify(t)),'">\n      <div class="trigger-field-row trigger-quantity-field-row">\n        <label for="any_products_trigger_qty">').concat(o.trigger_quantity,'</label>\n        <input type="number" id="any_products_trigger_qty" class="condition-quantity" value="').concat(null!=n?n:"1",'" min="1" />\n      </div>\n    </div>\n    ').concat(bt(),"\n  ")}(t)}var St=jQuery,Ct=document.querySelector("#acfw_bogo_deals");function Ot(t){St(Ct).data("editing",t),St(Ct).find("#save-bogo-deals").prop("disabled",!t)}function Qt(t){var n=St(this),e=n.data("block"),o=Ct.querySelector(".bogo-conditions-block"),c=Ct.querySelector(".bogo-product-deals-block"),a=St(Ct).data("bogo_deals"),i=a.conditions?a.conditions:null,l=a.deals?a.deals:null,s="conditions"==e?a.conditions_type:a.deals_type,r=null;r="conditions"===e?a.conditions_type==n.val()?i:r:a.deals_type==n.val()?l:r;var u,p,f="deals"==e,_=!1;switch(n.val()){case"combination-products":u=mt(null!=r?r:{},f),_=!0;break;case"product-categories":u=wt(null!=r?r:[],f),_=!0;break;case"any-products":u=jt(null!=r?r:{},f),_=!0;break;default:u=function(t,n,e){void 0===e&&(e=!1);var o=acfw_edit_coupon.add_product_label,c=acfw_edit_coupon.bogo_form_fields,a=acfw_edit_coupon.bogo_instructions,i=c.quantity,l=c.product,s=e?"".concat(a.apply_default):a.trigger_default,r=e?4:3,u=e?'<th class="price">Price/Discount</th>':"",p="",f=[];if(t.length>=1&&"specific-products"==n)for(var _=0,v=t;_<v.length;_++){var g=v[_],h=g.quantity,y=g.discount_type,b=g.discount_value,m=e?kt(y,b):"";f.push(g.product_id),p+="\n        <tr>\n          ".concat(xt(g),'\n          <td class="quantity">').concat(h,"</td>\n          ").concat(m,'\n          <td class="actions">\n            <a class="edit" href="javascript:void(0)"><span class="dashicons dashicons-edit"></span></a>\n            <a class="remove" href="javascript:void(0)"><span class="dashicons dashicons-no"></span></a>\n          </td>\n        </tr>\n      ')}else p=qt(r);return'\n    <p class="instructions">'.concat(s,'</p>\n    <table class="product-quantity-condition-table acfw-styled-table" \n      data-type="product" data-exclude="').concat(d(JSON.stringify(f)),'" \n      data-isdeals="').concat(e,'">\n      <thead>\n        <tr>\n          <th class="product">').concat(l,'</th>\n          <th class="quantity">').concat(i,"</th>\n          ").concat(u,'\n          <th class="actions"></th>\n        </tr>\n      </thead>\n      <tbody>').concat(p,'</tbody>\n      <tfoot>\n        <tr>\n          <td colspan="').concat(r,'">\n            <a class="add-table-row" href="javascript:void(0);">\n              <i class="dashicons dashicons-plus"></i>\n              ').concat(o,"\n            </a>\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n  ")}(null!=r?r:{},s,f),_=!1}if("conditions"==e)St(o).html(u).find("input.condition-quantity").trigger("change"===t.type?"change":"acfw_fetch_data"),p=o;else{var v=St(Ct).find(".multiple-items-desc");"specific-products"!==n.val()?v.show():v.hide(),St(c).html(u).find("input.condition-quantity").trigger("change"===t.type?"change":"acfw_fetch_data"),p=c}_&&void 0!==acfw_edit_coupon.upsell?St(p).addClass("premium-only"):St(p).removeClass("premium-only"),St("body").trigger("wc-enhanced-select-init"),St("body").trigger("init_tooltips")}var Nt=function(){return Nt=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var c in n=arguments[e])Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c]);return t},Nt.apply(this,arguments)},It=jQuery,Mt=document.querySelector("#acfw_bogo_deals"),Jt=woocommerce_admin_meta_boxes.post_id;function Dt(){var t,n;It("#acfw_bogo_deals").find(".acfw-styled-table tr.add-edit-form button.cancel").trigger("click");var e=acfw_edit_coupon.post_status,o=acfw_edit_coupon.upsell,c=Mt.querySelectorAll(".bogo-conditions-block table.acfw-styled-table tbody td.object,.bogo-conditions-block .any-products-trigger-form"),a=Mt.querySelectorAll(".bogo-product-deals-block table.acfw-styled-table tbody td.object"),i=Mt.querySelector(".acfw-overlay"),d=Mt.querySelector("input[name='bogo_type']:checked"),s=It(Mt).find("#bogo-condition-type").val(),r=It(Mt).find("#bogo-deals-type").val(),u=It(Mt).find(".notice-option"),p=Tt(c,s),f=Tt(a,r),_=d?d.value:null,g=!1,h=!1;if("any-products"===s&&(g=(null==p?void 0:p.quantity)<1),"any-products"===r&&(h=!(null==f?void 0:f.discount_type)||!(null==f?void 0:f.discount_value)||(null==f?void 0:f.quantity)<1),"combination-products"===s&&(g=!(null===(t=null==p?void 0:p.products)||void 0===t?void 0:t.length)||(null==p?void 0:p.quantity)<1),"combination-products"===r&&(h=!(null===(n=null==f?void 0:f.products)||void 0===n?void 0:n.length)||!(null==f?void 0:f.discount_type)||!(null==f?void 0:f.discount_value)||(null==f?void 0:f.quantity)<1),(null==p?void 0:p.length)<1||(null==f?void 0:f.length)<1||!_||g||h)return vex.dialog.alert(acfw_edit_coupon.bogo_deals_save_error_msg),void It(Mt).addClass("save-error");if(void 0!==o&&("specific-products"!==s||"specific-products"!==r))return vex.dialog.alert(acfw_edit_coupon.bogo_deals_save_error_msg),void It(Mt).addClass("save-error");if(["any-products","combination-products"].includes(r)&&!v(null==f?void 0:f.discount_type,null==f?void 0:f.discount_value))return vex.dialog.alert(acfw_edit_coupon.discount_type_value_error_msg),void It(Mt).addClass("save-error");var y={message:u.find("textarea[name='acfw_bogo_notice_message_text']").val(),button_text:u.find("input[name='acfw_bogo_notice_button_text']").val(),button_url:u.find("input[name='acfw_bogo_notice_button_url']").val(),notice_type:u.find("select[name='acfw_bogo_notice_type']").val()};l(i,"show"),It(Mt).trigger("save_bogo_deals");var b={conditions:p,deals:f,conditions_type:s,deals_type:r,type:_,notice_settings:y};It.post(ajaxurl,Nt({action:"acfw_save_bogo_deals",coupon_id:Jt},b),(function(t){"success"==t.status?(It(Mt).data("bogo_deals",b),"publish"!==e&&(It("input[name='post_title']").val()||It("input[name='post_title']").val("coupon-"+Jt),It("select[name='post_status']").append(new Option("Published","publish")).val("publish"),It("#publishing-action").append('\n                    <input type="hidden" name="publish" value="Publish">\n                '),It("input#publish").click())):t.error_msg&&vex.dialog.alert(t.error_msg),It(Mt).find("#clear-bogo-deals").prop("disabled",!1),Ot(!1),l(i,"hide")}),"json")}function Tt(t,n){var e,o=[];switch(n){case"any-products":o=It(t).closest(".any-products-form").data("anyproducts");break;case"combination-products":case"product-categories":o=It(t).closest("table.combined-objects-form").data("combined");break;default:t.forEach((function(t){(e=jQuery(t).data("product"))&&o.push(e)}))}return o}function Pt(){var t=It(this);if(confirm(t.data("prompt"))){var n=Mt.querySelector(".bogo-conditions-block table.acfw-styled-table tbody"),e=Mt.querySelector(".bogo-product-deals-block table.acfw-styled-table tbody"),o=Mt.querySelector(".acfw-overlay"),c=Mt.querySelector("input[name='bogo_type']:checked");l(o,"show"),It.post(ajaxurl,{action:"acfw_clear_bogo_deals",coupon_id:Jt,_wpnonce:t.data("nonce")},(function(a){"success"==a.status?(It(n).html(qt(3)),It(e).html(qt(4)),It(c).prop("checked",!1),t.prop("disabled",!0),Ot(!1),"Published"!=It("#post-status-display").text()&&(It("input[name='post_title']").val()||It("input[name='post_title']").val("coupon-"+Jt),It("input#publish").click())):a.error_msg&&vex.dialog.alert(a.error_msg),l(o,"hide")}),"json")}}function At(){var t,n,e=It(this).closest("table.combined-objects-form"),o=e.data("combined"),c=e.find(".wc-product-search option:selected"),a=parseInt(e.find("input.condition-quantity").val()+""),i=e.data("type").toString(),l="category"===i?{categories:[],quantity:a}:{products:[],quantity:a};if(e.data("isdeals")){var d=e.find("select.discount_type"),s=e.find("input.discount_value"),r=parseFloat(s.val().toString());if(r<0||isNaN(r))return s.val(o?o.discount_value:""),void vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);l.discount_type=d.val(),l.discount_value=s.val()}for(n=0;n<c.length;n++)t=It(c[n]),"category"===i?l.categories.push({category_id:t.val(),label:t.text()}):l.products.push({product_id:t.val(),label:t.text()});e.data("combined",l),Ot(!0)}function Ht(t){It(Mt).data("editing")&&(t.preventDefault(),It(Mt).find("#save-bogo-deals").trigger("click"),setTimeout((function(){It(Mt).hasClass("save-error")?It(Mt).removeClass("save-error"):It("form#post").submit()}),1e3))}function Wt(t){var n=It(this).closest(".any-products-trigger-form"),e=parseInt(n.find("input#any_products_trigger_qty").val()),o={quantity:e&&!isNaN(e)?e:0};n.data("anyproducts",o),"change"===t.type&&Ot(!0)}function Ft(t){var n=It(this).closest(".any-products-apply-form"),e=parseInt(n.find("input.condition-quantity").val()),o=n.find("select.discount_type").val().toString(),c=n.find("input.discount_value").val().toString(),a={quantity:e&&!isNaN(e)?e:0,discount_type:null!=o?o:"",discount_value:null!=c?c:""};n.data("anyproducts",a),"change"===t.type&&Ot(!0)}function Yt(t,n,e,o){void 0===o&&(o=!1);var c=acfw_edit_coupon.bogo_form_fields.type_to_search,a=acfw_edit_coupon.product_table_buttons,i=a.add,l=a.edit,s=a.cancel,r=o.quantity,u="object"==typeof o?function(t,n){var e=n.category_id,o=n.product_id,c=n.category_label,a=n.product_label,i="category"==t?c:a;return'<option value="'.concat("category"==t?e:o,'">').concat(i,"</option>")}(t,o):"",p=e?function(t){var n=acfw_edit_coupon.currency_symbol,e=acfw_edit_coupon.discount_field_options,o=e.override,c=e.percent,a=e.fixed,i=t.discount_type,l=t.discount_value,d="object"==typeof t&&l?l:"0";return'\n    <td class="price">\n        <div>\n        <select class="discount_type">\n            <option value="override" '.concat("override"==i?"selected":"",">").concat(n," : ").concat(o,'</option>\n            <option value="percent" ').concat("percent"==i?"selected":"",">% : ").concat(c,'</option>\n            <option value="fixed" ').concat("fixed"==i?"selected":"",">-").concat(n," : ").concat(a,'</option>\n        </select>\n        <input type="text" class="discount_value short wc_input_price" value="').concat(d,'">\n        </div>\n    </td>\n    ')}(o):"",f="object"==typeof o?l:i;return'\n    <tr class="add-edit-form adding">\n        <td class="product" data-object="'.concat("object"==typeof o?d(JSON.stringify(o)):0,'">\n            <div class="object-search-wrap">\n                <select class="').concat("category"==t?"product-category-in-cart":"product-in-cart",' wc-product-search"\n                    data-placeholder="').concat(c,'"\n                    data-action="').concat("category"==t?"acfw_search_product_category":"acfw_search_products",'"\n                    data-exclude="').concat(d(JSON.stringify(n)),'">').concat(u,'</select>\n            </div>\n        </td>\n        <td class="quantity">\n            <input type="number" class="condition-quantity" value="').concat("object"==typeof o?r:1,'" min="1">\n        </td>\n        ').concat(p,'\n        <td class="actions">\n            <button type="button" class="condition-product-add button-primary">').concat(f,'</button>\n            <button type="button" class="cancel button">').concat(s,"</button>\n        </td>\n    </tr>\n    ")}function zt(t,n,e){var o=t.quantity,c=t.discount_type,a=t.discount_value,i=e?'<td class="price">('.concat(c,") ").concat(a,"</td>"):"";return"\n    <tr>\n        ".concat(function(t,n){switch(n){case"category":return function(t){var n=t.category_id,e=t.category_label;return'\n    <td class="category category-'.concat(n,' object" data-category="').concat(d(JSON.stringify(t)),'">\n        ').concat(e,"\n    </td>\n    ")}(t);case"product":return xt(t)}}(t,n),'\n        <td class="quantity">').concat(o,"</td>\n        ").concat(i,'\n        <td class="actions">\n            <a class="edit" href="javascript:void(0)"><span class="dashicons dashicons-edit"></span></a>\n            <a class="remove" href="javascript:void(0)"><span class="dashicons dashicons-no"></span></a>\n        </td>\n    </tr>')}var Et=jQuery;acfw_edit_coupon.bogo_form_fields;function Lt(){var t=Et(this).closest(".acfw-styled-table"),n=t.find("tbody"),e=t.data("isdeals"),o=t.data("type"),c=t.data("exclude");n.find("tr.no-result").remove(),n.append(Yt(o,c,e)),Et("body").trigger("wc-enhanced-select-init"),n.find("tr.add-edit-form select.enhanced").trigger("focus")}function Vt(){var t=jQuery(this),n=t.closest("tr"),e=t.closest(".acfw-styled-table"),o=e.find("tbody"),c=e.data("isdeals"),a=e.data("type"),i=n.find(".object").data(a),l=i.category_id,d=i.product_id,s=e.data("exclude"),r="category"==a?l:d;s.splice(s.indexOf(r),1),o.find("tr.no-result").remove(),n.replaceWith(Yt(a,s,c,i)),e.data("exclude",s),e.find(".wc-product-search").data("exclude",s),Et("body").trigger("wc-enhanced-select-init")}function Ut(){var t=Et(this),n=t.closest("tr"),e=t.closest("table"),o=n.closest("tbody"),c=e.data("isdeals"),a=n.find("td").length,i=e.data("type"),l=n.find("td.product").data("object"),d=l.category_id,s=l.product_id,r=e.data("exclude"),u="category"==i?d:s;r.includes(u)?vex.dialog.alert(acfw_edit_coupon.product_exists_in_table):"object"==typeof l?(r.push(u),n.replaceWith(zt(l,i,c)),e.data("exclude",r),e.find(".wc-product-search").data("exclude",r)):(n.remove(),o.find("tr").length<=0&&o.append(qt(a,i)))}function Bt(){var t=Et(this),n=t.closest("tr"),e=t.closest("table.acfw-styled-table"),o=e.data("isdeals"),c=e.data("type"),a=n.find(".wc-product-search"),i=n.find(".condition-quantity"),l=e.data("exclude");if(!a.val()||!i.val()||i.val()<1)vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);else if(l.includes(parseInt(a.val().toString())))vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);else{if(o){var d=n.find("input.discount_value").val().toString();if(!v(n.find("select.discount_type").val().toString(),d))return void vex.dialog.alert(acfw_edit_coupon.discount_type_value_error_msg);if(_(d)<0||isNaN(_(d)))return void vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg)}var s=function(t,n,e){var o={};o="category"==n?{category_id:parseInt(t.find(".wc-product-search").val()+""),quantity:parseInt(t.find(".condition-quantity").val()+""),category_label:t.find(".wc-product-search option:selected").text()}:{product_id:parseInt(t.find(".wc-product-search").val()+""),quantity:parseInt(t.find(".condition-quantity").val()+""),product_label:t.find(".wc-product-search option:selected").text()};e&&(o.discount_type=t.find("select.discount_type").val(),o.discount_value=t.find("input.discount_value").val().toString());return o}(n,c,o),r=s.category_id,u=s.product_id;l.push("category"==c?r:u),n.replaceWith(zt(s,c,o)),e.data("exclude",l),e.find(".wc-product-search").data("exclude",l),Ot(!0)}}function Kt(){var t,n=Et(this).closest("tr"),e=n.closest("table"),o=n.closest("tbody"),c=n.find("td").length,a=e.data("type"),i=n.find("td.object").data(a),l=e.data("exclude");if("category"===a)t=l.indexOf(parseInt(i.category_id));else t=l.indexOf(parseInt(i.product_id));-1!==t&&l.splice(t,1),e.data("exclude",l),e.find(".wc-product-search").data("exclude",l),n.remove(),o.find("tr").length<=0&&o.append(qt(c,a)),Ot(!0)}var Gt=function(){return Gt=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var c in n=arguments[e])Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c]);return t},Gt.apply(this,arguments)},Rt=jQuery,Xt=document.querySelector("#acfw_bogo_deals");function Zt(){var t=Rt(this),n=t.closest("#general_coupon_data"),e=n.find("p.form-field input");if("acfw_bogo"===t.val()){n.addClass("acfw-bogo-type"),Rt("#acfw_bogo_deals").show();for(var o=0;o<=e.length;o++)["expiry_date","_acfw_coupon_sort_priority","coupon_amount"].includes(Rt(e[o]).prop("name"))||Rt(e[o]).prop("disabled",!0)}else{n.removeClass("acfw-bogo-type"),Rt("#acfw_bogo_deals").hide();for(o=0;o<=e.length;o++)["expiry_date","_acfw_coupon_sort_priority","coupon_amount"].includes(Rt(e[o]).prop("name"))||Rt(e[o]).prop("disabled",!1)}}function $t(){Ot(!0)}function tn(){var t=jQuery(this);t.val()<1&&t.val(1)}acfw_edit_coupon=Gt(Gt({},acfw_edit_coupon),{bogo_toggle_editing_mode:Ot});var nn=jQuery;function en(){var t=nn(this),n=t.closest(".toggle-enable-fields").find("select,textarea,input:not(.toggle-trigger-field)"),e=!t.prop("checked");n.prop("disabled",e),e?n.closest(".form-field").addClass("disabled"):n.closest(".form-field").removeClass("disabled")}var on=jQuery;function cn(){var t=document.querySelector("#acfw_url_coupon");on(t).on("click",".copy-coupon-url",an),on("input#_acfw_coupon_url").after('<button type="button" class="copy-coupon-url" data-clipboard-target="#_acfw_coupon_url">\n    <svg width="15" height="15" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 460 460" style="enable-background:new 0 0 460 460;" xml:space="preserve">\n      <g>\n        <path d="M425.934,0H171.662c-18.122,0-32.864,14.743-32.864,32.864v77.134h30V32.864c0-1.579,1.285-2.864,2.864-2.864h254.272\n          c1.579,0,2.864,1.285,2.864,2.864v254.272c0,1.58-1.285,2.865-2.864,2.865h-74.729v30h74.729\n          c18.121,0,32.864-14.743,32.864-32.865V32.864C458.797,14.743,444.055,0,425.934,0z"/>\n        <path d="M288.339,139.998H34.068c-18.122,0-32.865,14.743-32.865,32.865v254.272C1.204,445.257,15.946,460,34.068,460h254.272\n          c18.122,0,32.865-14.743,32.865-32.864V172.863C321.206,154.741,306.461,139.998,288.339,139.998z M288.341,430H34.068\n          c-1.58,0-2.865-1.285-2.865-2.864V172.863c0-1.58,1.285-2.865,2.865-2.865h254.272c1.58,0,2.865,1.285,2.865,2.865v254.273h0.001\n          C291.206,428.715,289.92,430,288.341,430z"/>\n      </g>\n    </svg>\n    </button>'),new ClipboardJS(".copy-coupon-url")}function an(){on(this).after('<span class="coupon-url-copied">'.concat(acfw_edit_coupon.copied_label,"</span>")),setTimeout((function(){on("span.coupon-url-copied").fadeOut(500)}),1e3)}var ln=jQuery;function dn(){var t=document.querySelector("#acfw_scheduler"),n=t.querySelector("#_acfw_schedule_start"),e=t.querySelector("#_acfw_schedule_expire"),o=document.querySelector("#general_coupon_data p.expiry_date_field");ln(t).on("change",".date-field,.date-hour,.date-minute",un),ln(t).on("click",".clear-scheduler-fields",pn),ln(o).css("display","none"),ln(n).trigger("change acfw_load"),ln(e).trigger("change acfw_load"),ln(t).on("change acfw_load",".acfw-section-toggle input",fn),ln(t).find(".acfw-section-toggle input").trigger("acfw_load"),ln(".wrap").on("submit","form#post",rn),function(){var t,n,e=document.querySelector("#_acfw_schedule_start"),o=document.querySelector("#_acfw_schedule_expire"),c=null!==(t=flatpickr.parseDate(o.value,"Y-m-d H:i:S"))&&void 0!==t?t:null,a=null!==(n=flatpickr.parseDate(e.value,"Y-m-d H:i:S"))&&void 0!==n?n:null;c&&c.setMinutes(c.getMinutes()-1);a&&a.setMinutes(a.getMinutes()+1);ln(e).flatpickr({allowInput:!0,enableTime:!0,altInput:!0,allowInvalidPreload:!0,altFormat:"Y-m-d h:i K",dateFormat:"Y-m-d H:i:S",maxDate:c,onChange:function(t,n,e){var c=t[0];c&&(c.setMinutes(c.getMinutes()+1),o._flatpickr.set("minDate",c),sn())}}),ln(o).flatpickr({allowInput:!0,enableTime:!0,altInput:!0,altFormat:"Y-m-d h:i K",dateFormat:"Y-m-d H:i:S",minDate:a,onChange:function(t,n,o){var c=t[0];c&&(c.setMinutes(c.getMinutes()-1),e._flatpickr.set("maxDate",c),sn())}})}()}function sn(){flatpickr.parseDate(ln("#_acfw_schedule_start").val(),"Y-m-d H:i:S")>=flatpickr.parseDate(ln("#_acfw_schedule_expire").val(),"Y-m-d H:i:S")?(ln("#_acfw_schedule_start").parent().addClass("error"),ln("#_acfw_schedule_expire").parent().addClass("error")):(ln("#_acfw_schedule_start").parent().removeClass("error"),ln("#_acfw_schedule_expire").parent().removeClass("error"))}function rn(t){ln(".acfw-date-range-schedules-section span.date-time-field").hasClass("error")&&(t.preventDefault(),vex.dialog.alert({unsafeMessage:acfw_edit_coupon.invalid_scheduler_time}),ln("#publishing-action .spinner").removeClass("is-active"),ln("#publishing-action #publish").removeClass("disabled"))}function un(){var t=ln(this).closest(".date-time-field").find(".date-field");t.val()?t.prop("required",!0):t.prop("required",!1)}function pn(){var t=document.querySelector("#acfw_scheduler"),n=t.querySelector("#_acfw_schedule_start"),e=t.querySelector("#_acfw_schedule_expire");ln(this).siblings(".date-time-field").find("input").prop("required",!1).val(""),ln(n).trigger("change"),ln(e).trigger("change")}function fn(){var t=ln(this),n=t.closest(".acfw-scheduler-section").find(".options_group");t.is(":checked")?(n.removeClass("disabled"),n.find(".date-field,.days-time-field label input,textarea").prop("disabled",!1),ln("#acfw_scheduler .options_group input").trigger("acfw_load")):(n.addClass("disabled"),n.find(".date-field,.days-time-field label input,textarea").prop("disabled",!0)),n.find("input").trigger("change")}var _n=jQuery,vn=!1;function gn(){_n("#usage_limit_coupon_data").on("change","#reset_usage_limit_period",hn),_n("#usage_restriction_coupon_data .acfw_exclude_coupons_field,#usage_restriction_coupon_data .acfw_allowed_customers_field").on("click change focus","input,select",yn),_n("#acfw-auto-apply-coupon").on("change","#acfw_auto_apply_coupon_field",bn),_n("#acfw-virtual-coupon").on("change","#acfw_enable_virtual_coupons",mn),_n("#acfw_cart_conditions").on("change",".condition-types",wn),_n("#woocommerce-coupon-data").on("change acfw_load","#discount_type",xn),_n("#acfw_bogo_deals").on("change acfw_load","select#bogo-deals-type",qn),_n("#acfw_bogo_deals").on("change","input[name='acfw_bogo_auto_add_products']",kn),_n("#acfw_scheduler").on("change",".acfw-daytime-schedules-section .acfw-section-toggle input[type='checkbox']",jn),_n("#woocommerce-coupon-data #discount_type").trigger("acfw_load"),_n("p.acfw_exclude_coupons_field").insertAfter("p.form-field.individual_use_field")}function hn(){var t=acfw_edit_coupon.upsell.usage_limits;vex.dialog.alert({unsafeMessage:'<div class="upsell-alert usage-limits">'.concat(t,"</div>")}),_n(this).val("none")}function yn(){if(!vn){vn=!0;var t=acfw_edit_coupon.upsell.usage_restriction;vex.dialog.alert({unsafeMessage:'<div class="upsell-alert exclude-coupon">'.concat(t,"</div>"),afterClose:function(){return vn=!1}}),_n(this).val(""),_n(this).blur()}}function bn(){var t=acfw_edit_coupon.upsell.auto_apply;vex.dialog.alert({unsafeMessage:'<div class="upsell-alert auto-apply">'.concat(t,"</div>")}),_n(this).prop("checked",!1)}function mn(){var t=acfw_edit_coupon.upsell.virtual_coupons;vex.dialog.alert({unsafeMessage:'<div class="upsell-alert auto-apply">'.concat(t,"</div>")}),_n(this).prop("checked",!1)}function wn(){var t=_n(this),n=t.closest("#acfw_cart_conditions"),e=t.closest(".add-condition-form"),o=n.data("premium-conditions"),c=n.find(".acfw-dyk-notice-holder"),a=e.find(".acfw-dyk-notice");a.length||(e.append(c.html()),a=e.find(".acfw-dyk-notice")),_n.inArray(t.val(),o)>=0?a.show():a.hide()}function xn(){"acfw_bogo"===_n(this).val()?_n("p.acfw-dyk-notice-general").hide():_n("p.acfw-dyk-notice-general").show()}function qn(){var t=_n(this),n=t.closest("#acfw_bogo_deals").find(".bogo-auto-add-products-field"),e=n.find("input[type='checkbox']");"specific-products"===t.val()?(e.prop("disabled",!1),n.addClass("show")):(e.prop("disabled",!1),n.removeClass("show"))}function kn(){_n(this).prop("checked",!1);var t=acfw_edit_coupon.upsell.bogo_auto_add_get_products;vex.dialog.alert({unsafeMessage:'<div class="upsell-alert usage-limits">'.concat(t,"</div>")}),_n(this).val("none")}function jn(){var t=_n(this),n=acfw_edit_coupon.upsell.day_time_schedules;vex.dialog.alert({unsafeMessage:'<div class="upsell-alert day-time-schedules">'.concat(n,"</div>")}),t.prop("checked",!1).trigger("acfw_load")}function Sn(t){var n,e,o,c,a=t.title,i=t.className,l=t.links;return acfw_edit_coupon.help_modal.is_premium&&(l=l.filter((function(t){return void 0===(null==t?void 0:t.freeOnly)||!(null==t?void 0:t.freeOnly)}))),'\n    <div class="links-list '.concat(i,'">\n      <h3>').concat(a,"</h3>\n\n      ").concat((null==t?void 0:t.search)?(n=null==t?void 0:t.search,e=n.slug,o=n.action,c=n.placeholder,'\n    <div class="search-widget search-'.concat(e,'">\n      <input class="search-input" type="text" placeholder="').concat(c,'" data-action="').concat(o,'" />\n      <button type="button" class="clear-search dashicons-before dashicons-no-alt"></button>\n      <div class="search-results"></div>\n    </div>\n  ')):"","\n\n      <ul>\n        ").concat(l.map((function(t){return"<li>".concat(function(t){var n=t.title,e=t.url,o=acfw_edit_coupon.help_modal.is_premium;return'<a href="'.concat(o&&(null==t?void 0:t.premiumUrl)?null==t?void 0:t.premiumUrl:e,'">').concat(n,"</a>")}(t),"</li>")})).join(""),"\n      </ul>\n    </div>\n  ")}function Cn(t){var n=acfw_edit_coupon.help_modal,e=n.labels,o=n.images_url,c=n.is_premium,a=t.target,i=t.left,l=i.title,d=i.content,s=i.videos,r=t.right,u=r.links,p=r.kbs,f=r.tutorials,_={slug:"kb-articles",action:"acfw_search_help_kb_articles",placeholder:e.search_placeholder},v=c?"acfwp":"acfwf",g="https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=help_modal&utm_campaign=help_modal_".concat(a,"_upgrade_link"),h="https://advancedcouponsplugin.com/?utm_source=".concat(v,"&utm_medium=help_modal&utm_campaign=help_brand_link_").concat(a);return'\n    <div class="header">\n      <div class="logo">\n        <a href="'.concat(h,'" target="_blank"><img src="').concat(o,'acfw-logo.png" alt="Advanced Coupons logo" /></a>\n      </div>\n      ').concat(c?"":'\n        <div class="upgrade-link">\n          <a href="'.concat(g,'" target="_blank">\n            <span>').concat(e.upgrade_to_premium,'</span>\n            <i class="dashicons dashicons-external"></i>\n          </a>\n        </div>\n      '),'\n    </div>\n    <main>\n      <h1 class="title">').concat(l,'</h1>\n      <div class="content">\n        ').concat(d,"\n      </div>\n      ").concat(s.length?'<div class="video-gallery-placeholder"><img src="'.concat(o,'spinner-2x.gif" alt="Loading videos" /><p>').concat(e.loading_videos,"</p></div>"):"","\n    </main>\n    <aside>\n      ").concat(Sn({title:e.rel_links,className:"relevant-links",links:u}),"\n      ").concat(Sn({title:e.kb_articles,className:"knowledge-base-articles",links:p,search:_}),"\n      ").concat(Sn({title:e.tut_guides,className:"tutorials-guides",links:f}),"\n    </aside>\n  ")}function On(t){var n=acfw_edit_coupon.help_modal.images_url,e=acfw_edit_coupon.help_modal.labels,o=e.permission_request,c=e.allow,a=e.cancel;return'\n  <div id="acfw-help-modal-permission-request" data-module="'.concat(t,'">\n    <img src="').concat(n,'acfw-logo.png" />\n    <p>').concat(o,'</p>\n    <p class="actions">\n      <button class="button-primary allow" type="button">').concat(c,'</button>\n      <button class="button cancel" type="button">').concat(a,"</button>\n    </p>\n  </div>\n  ")}function Qn(){var t=acfw_edit_coupon.help_modal,n=t.images_url,e=t.labels;return'<div id="acfw-help-modal-placeholder">\n    <img src="'.concat(n,'spinner-2x.gif" />\n    <p>').concat(e.loading_content,"</p>\n  </div>")}function Nn(t){return'\n  <div class="no-video" style="background-image:url('.concat(t.thumbnail,');">\n    <a href="').concat(t.url,'" rel="noreferer noopener" >\n      <span>').concat(acfw_edit_coupon.help_modal.labels.no_video,"</span>\n    </a>\n  </div>\n  ")}var In=jQuery,Mn=[],Jn="";function Dn(t,n){var e=acfw_edit_coupon.help_modal._secure_nonce;t.length&&In.post(ajaxurl,{action:"acfw_get_help_videos_oembed",urls:t.map((function(t){return t.url})),width:In(".acfw-help-vex .vex-content main").width(),_nonce:e},(function(e){e=e.map((function(n){var e=t.findIndex((function(t){return t.url===n.url}));return n.title=e>=0?t[e].title:"",n})),Mn=e,Jn=n,Tn(e)}),"json")}function Tn(t){var n=In(".acfw-help-vex .video-gallery-placeholder");n.length&&n.replaceWith(function(t){return'\n  <div class="acfw-help-video-gallery">\n    <div class="videos">\n      '.concat(t[0].embed?t[0].embed:Nn(t[0]),"\n    </div>\n    ").concat(t.length>1?'\n      <ul class="thumbnails">\n        '.concat(t.map((function(t,n){return"\n            <li ".concat(0===n?'class="active"':"",'>\n              <a href="javascript:void(0);" data-videoid="').concat(t.videoid,'">\n                <img src="').concat(t.thumbnail,'" title="').concat(t.title,'" />\n              </a>\n              <span class="title">').concat(t.title,"</span>\n            </li>\n            ")})).join(""),"\n      </ul>\n      "):"","\n    \n  </div>\n  ")}(t))}function Pn(){var t=jQuery(this),n=t.closest("li"),e=t.closest(".acfw-help-video-gallery"),o=e.find(".videos"),c=e.find("ul.thumbnails li"),a=t.data("videoid");if(!n.hasClass("active")){c.removeClass("active"),n.addClass("active");var i=Mn.findIndex((function(t){return t.videoid===a}));i>=0&&o.html(Mn[i].embed?Mn[i].embed.replace("oembed","oembed&autoplay=1"):Nn(Mn[i]))}}var An=jQuery,Hn=[];function Wn(){var t=acfw_edit_coupon.help_modal.allow_fetch,n=An(this).closest(".acfw-help-link").data("module");vex.dialog.open({unsafeMessage:'\n      <a class="vex-close" href="javascript:void(0);"></a>\n      '.concat(t?Qn():On(n),"\n    "),className:"vex-theme-plain acfw-help-vex",showCloseButton:!1,buttons:{}}),t&&Yn(n)}function Fn(t){var n=An("#acfw-help-modal-placeholder");n.length&&(n.replaceWith(t),An(".acfw-help-vex").find("main a,aside a").attr("target","_blank").attr("rel","noopener noreferrer nofollow"))}function Yn(t){var n,e=acfw_edit_coupon.help_modal._secure_nonce;if(n=function(t){var n=Hn.findIndex((function(n){return n.target===t}));return n>=0?Hn[n]:null}(t))return Fn(Cn(n)),void function(t,n){Mn.length&&n===Jn?Tn(Mn):Dn(t,n)}(n.left.videos,t);An.post(ajaxurl,{action:"acfw_fetch_help_data",module:t,_nonce:e},(function(n){Hn.push(n),Fn(Cn(n)),Dn(n.left.videos,t)}),"json").fail((function(t){var n,e;Fn((n=t.responseJSON,e=n.errorMsg,'\n    <div class="acfw-help-modal-error">\n      <p>'.concat(e,"</p>\n    </div>\n  ")))}))}var zn=jQuery,En=null,Ln=null;function Vn(){var t=zn(this).closest(".search-widget"),n=t.find("input.search-input"),e=t.find(".search-results"),o=acfw_edit_coupon.help_modal,c=o.labels,a=o.images_url,i=o._secure_nonce,l=n.val();if(!l)return clearTimeout(En),En=null,e.height(0).html(""),void t.removeClass("show-clear");t.addClass("show-clear"),function(t,n,e){En&&(clearTimeout(En),En=null);if(t.term===(null==Ln?void 0:Ln.term))return void e(Ln.results);En=setTimeout((function(){n(),zn.post(ajaxurl,t,e,"json")}),1e3)}({action:n.data("action"),term:n.val(),_nonce:i},(function(){e.height(35).html('<div class="loading"><img src="'.concat(a,'spinner.gif" /></div>'))}),(function(n){t.hasClass("show-clear")&&(n.length?(Ln={term:l,results:n},e.html(function(t,n){var e=t.map((function(t){var e=t.url,o=t.title;return'<li><a href="'.concat(function(t,n){return"".concat(t,"?utm_source=acfwf&utm_medium=help_modal&utm_campaign=kb_search&utm_term=").concat(n)}(e,n),'" rel="noopener noreferrer nofollow" target="_blank">').concat(o,"</a></li>")})).join("");return"<ul>".concat(e,"</ul>")}(n,l))):e.html('<div class="no-result">'.concat(c.search_no_results,"</div>")),e.height(e.find("ul,.no-result").height()+3))}))}function Un(){var t=zn(this).closest(".search-widget"),n=t.find("input.search-input"),e=t.find(".search-results");clearTimeout(En),En=null,n.val(""),e.height(0).html(""),t.removeClass("show-clear")}var Bn=jQuery;function Kn(){var t=acfw_edit_coupon.help_modal._secure_nonce,n=jQuery(this).closest("#acfw-help-modal-permission-request"),e=n.data("module");n.replaceWith(Qn()),Bn.post(ajaxurl,{action:"acfw_save_fetch_help_permission",_nonce:t},(function(){Yn(e),acfw_edit_coupon.help_modal.allow_fetch=!0}),"json")}function Gn(){vex.closeAll()}var Rn=jQuery;var Xn=acfw_edit_coupon.modules,Zn=acfw_edit_coupon.upsell;jQuery(document).ready((function(t){var n,e,l,d,r,u;Xn.indexOf("acfw_cart_conditions_module")>-1&&(vt(gt).on("click","#add-cart-condition-group",b),vt(gt).on("click","a.remove-condition-group",m),vt(gt).on("click",".add-condition-field",T),vt(gt).on("click","a.remove-condition-field",P),vt(gt).on("click",".add-condition-trigger",o),vt(gt).on("click",".cancel-add-condition-field",o),vt(gt).on("click",".acfw-styled-table tfoot .add-table-row",X),vt(gt).on("click",".acfw-styled-table td.actions a.edit",Z),vt(gt).on("click","tr.add-edit-form .actions .condition-product-add",$),vt(gt).on("click","tr.add-edit-form .actions .cancel",tt),vt(gt).on("click",".acfw-styled-table td.actions a.remove",nt),vt(gt).on("click","#save-cart-conditions",L),vt(gt).on("change","input[type='number']",at),vt(gt).on("change","select.condition-select",it),vt(gt).on("change","select.has-ordered-before-type",lt),vt(gt).on("change",".wc_input_price",dt),vt(gt).on("change","select.custom-taxonomy",a),vt(gt).on("change",".shipping-zone-region-field select.condition-select",i),vt(gt).on("blur",".wc_input_price",st),vt(gt).on("change","select.value-type",rt),vt("form#post").on("submit",V),vt(gt).find("select").trigger("change"),vt(gt).css("min-height",vt("#coupon_options").height()),vt(gt).on("change","input,select,textarea",(function(){c(!0)})),vt(gt).find(".condition-groups").each((function(){vt(this).find(".condition-group-fields").length&&vt(this).show()})),vt(".acfw-cart-condition-tabs").on("click","li a",pt),setTimeout(ht,500)),Xn.indexOf("acfw_bogo_deals_module")>-1&&(Rt(Xt).on("click",".acfw-styled-table tfoot .add-table-row",Lt),Rt(Xt).on("click",".acfw-styled-table td.actions a.edit",Vt),Rt(Xt).on("click","tr.add-edit-form .actions .cancel",Ut),Rt(Xt).on("click","tr.add-edit-form .actions .condition-product-add",Bt),Rt(Xt).on("click",".acfw-styled-table td.actions a.remove",Kt),Rt(Xt).on("click","button#save-bogo-deals",Dt),Rt(Xt).on("click","button#clear-bogo-deals",Pt),Rt(Xt).on("change acfw_load","select#bogo-condition-type,select#bogo-deals-type",Qt),Rt(Xt).on("change acfw_fetch_data",".combined-objects-form select,.combined-objects-form input",At),Rt(Xt).on("change acfw_fetch_data",".any-products-trigger-form input",Wt),Rt(Xt).on("change acfw_fetch_data",".any-products-apply-form input,.any-products-apply-form select",Ft),Rt(Xt).on("change",".condition-quantity",tn),Rt(Xt).on("blur",".wc_input_price",s),Rt(Xt).css("min-height",Rt("#coupon_options").height()),Rt(Xt).on("change","input[name='bogo_type']",$t),Rt(Xt).on("click",".acfw-styled-table .actions .remove",$t),Rt(Xt).find(".notice-option").on("change","input,textarea,select",$t),Rt("form#post").on("submit",Ht),Rt(Xt).find("select#bogo-condition-type,select#bogo-deals-type").trigger("acfw_load"),Rt("#woocommerce-coupon-data").on("change acfw_load","select#discount_type",Zt),Rt("#woocommerce-coupon-data select#discount_type").trigger("acfw_load")),Xn.indexOf("acfw_url_coupons_module")>-1&&cn(),Xn.indexOf("acfw_scheduler_module")>-1&&dn(),Zn&&gn(),(n=nn(".toggle-enable-fields")).on("change",".toggle-trigger-field",en),n.find(".toggle-trigger-field").trigger("change"),e=document.querySelectorAll("#post-body .acfw-help-link"),l=acfw_edit_coupon.help_modal,d=l.help_text,r=l.images_url,e.forEach((function(t){var n='\n      <a class="acfw-help-modal-trigger" href="javascript:void(0);">'.concat(d,' \n        <img class="acfw-icon" src="').concat(r,'help-icon.svg" alt="').concat(d,'" />\n      </a>\n    ');Rn(t).html(n)})),Rn("#post-body").on("click",".acfw-help-modal-trigger",Wn),Rn("body").on("click",".acfw-help-vex .vex-close",(function(){return vex.closeAll()})),Rn("body").on("click",".acfw-help-vex .acfw-help-video-gallery ul.thumbnails li a",Pn),Rn("body").on("keyup",".acfw-help-vex .search-widget input.search-input",Vn),Rn("body").on("click",".acfw-help-vex .search-widget button.clear-search",Un),Rn("body").on("click",".acfw-help-vex #acfw-help-modal-permission-request button.allow",Kn),Rn("body").on("click",".acfw-help-vex #acfw-help-modal-permission-request button.cancel",Gn),(u=new URLSearchParams(window.location.search).get("type"))&&window.location.pathname.includes("post-new.php")&&jQuery("select#discount_type").val(u).trigger("change")}))})();
//# sourceMappingURL=edit-advanced-coupon.js.map