{"version":3,"file":"edit-advanced-coupon.js","mappings":"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","sources":["webpack://edit_advanced_coupon/./src/helper.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/table_product_row.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/table_placeholder_row.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/product_quantity.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/customer_registration_date.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/customer_last_ordered.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/total_customer_spend.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/has_ordered_before.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/shipping_zone_region.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/custom_taxonomy.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/custom_meta.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields/number_of_orders.ts","webpack://edit_advanced_coupon/./src/cart_conditions/index.ts","webpack://edit_advanced_coupon/./src/add_products/toggles.ts","webpack://edit_advanced_coupon/./src/add_products/templates/add_edit_row.ts","webpack://edit_advanced_coupon/./src/add_products/templates/product_row.ts","webpack://edit_advanced_coupon/./src/add_products/templates/placeholder_row.ts","webpack://edit_advanced_coupon/./src/add_products/table.ts","webpack://edit_advanced_coupon/./src/add_products/save.ts","webpack://edit_advanced_coupon/./src/add_products/index.ts","webpack://edit_advanced_coupon/./src/auto_apply.ts","webpack://edit_advanced_coupon/./src/shipping_overrides/actions.ts","webpack://edit_advanced_coupon/./src/shipping_overrides/toggles.ts","webpack://edit_advanced_coupon/./src/shipping_overrides/templates/placeholder_row.ts","webpack://edit_advanced_coupon/./src/shipping_overrides/save.ts","webpack://edit_advanced_coupon/./src/shipping_overrides/templates/add_edit_row.ts","webpack://edit_advanced_coupon/./src/shipping_overrides/templates/table_row.ts","webpack://edit_advanced_coupon/./src/shipping_overrides/table.ts","webpack://edit_advanced_coupon/./src/shipping_overrides/index.ts","webpack://edit_advanced_coupon/./src/scheduler.ts","webpack://edit_advanced_coupon/./src/bogo_deals.ts","webpack://edit_advanced_coupon/./src/coupon_sort.ts","webpack://edit_advanced_coupon/./src/virtual_coupons.ts","webpack://edit_advanced_coupon/./src/excludeCoupon.ts","webpack://edit_advanced_coupon/./src/advanced_restrictions.ts","webpack://edit_advanced_coupon/./src/index.ts"],"sourcesContent":["declare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Toggle overlay block.\r\n *\r\n * @since 2.0\r\n *\r\n * @param object overlay Overlay html element.\r\n * @param string type    Toggle type (show/hide).\r\n */\r\nexport function toggle_overlay(overlay: HTMLElement, type: string = \"\"): void {\r\n  if (!type) type = \"show\";\r\n\r\n  let display = type === \"show\" ? \"block\" : \"none\";\r\n  jQuery(overlay).css(\"display\", display);\r\n}\r\n\r\n/**\r\n * Escape string to be used on an attribute.\r\n *\r\n * @since 2.0\r\n * @param string text String to escape.\r\n */\r\nexport function esc_attr(text: string): string {\r\n  const map: any = {\r\n    \"&\": \"&amp;\",\r\n    \"<\": \"&lt;\",\r\n    \">\": \"&gt;\",\r\n    '\"': \"&quot;\",\r\n    \"'\": \"&#039\",\r\n  };\r\n\r\n  return text.replace(/[&<>\"']/g, (m) => map[m]);\r\n}\r\n\r\n/**\r\n * Remove leading zeros from an input field.\r\n *\r\n * @since 1.2\r\n */\r\nexport function remove_leading_zeros() {\r\n  const { decimal_separator } = acfw_edit_coupon;\r\n\r\n  const $input: JQuery = jQuery(this);\r\n  let value: string = $input.val() + \"\";\r\n\r\n  if (value == \"0\" + decimal_separator) $input.val(\"0\");\r\n  if (value == \"0\" || value.substring(0, 2) == \"0\" + decimal_separator) return;\r\n\r\n  value = value.replace(/^0+/, \"\");\r\n  value = value.substring(0, 1) == decimal_separator ? \"0\" + value : value;\r\n\r\n  $input.val(value);\r\n}\r\n\r\n/**\r\n * Array to select options markup.\r\n *\r\n * @param options\r\n * @param value\r\n * @param key\r\n * @param label\r\n */\r\nexport function array_to_select_options(\r\n  options: any,\r\n  value: string,\r\n  key: string = \"value\",\r\n  label: string = \"label\"\r\n): string {\r\n  return options\r\n    .map(\r\n      (option: any) =>\r\n        `<option value=\"${option[key]}\" ${\r\n          option[key] == value ? \"selected\" : \"\"\r\n        }>${option[label]}</option>`\r\n    )\r\n    .toString()\r\n    .replace(/>,</g, \"><\");\r\n}\r\n\r\n/**\r\n * Get allowed minimum value.\r\n *\r\n * @since 2.0\r\n * @since 1.2   Remove unused property.\r\n *\r\n * @param {string} condition\r\n */\r\nexport function get_allowed_minimum_value(condition: string): number {\r\n  return condition == \"<\" ? 1 : 0;\r\n}\r\n\r\n/**\r\n * Compare option values to mark option as selected.\r\n *\r\n * @param value_1\r\n * @param value_2\r\n */\r\nexport function selected(value_1: string, value_2: string) {\r\n  return value_1 == value_2 ? \"selected\" : \"\";\r\n}\r\n\r\nexport function selected_multiple(array: any[], value: string) {\r\n  return array.indexOf(value) >= 0 ? \"selected\" : \"\";\r\n}\r\n\r\n/**\r\n * Get discount type select options markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param value\r\n */\r\nexport function discount_type_options(\r\n  value: string = \"\",\r\n  show_nodiscount: boolean = false\r\n): string {\r\n  const { currency_symbol, discount_field_options } = acfw_edit_coupon;\r\n  const { nodiscount, override, percent, fixed } = discount_field_options;\r\n  const nodiscount_markup = `<option value=\"nodiscount\" ${selected(\r\n    value,\r\n    \"nodiscount\"\r\n  )}>= : ${nodiscount}</option>`;\r\n\r\n  return `\r\n    ${show_nodiscount ? nodiscount_markup : \"\"}\r\n    <option value=\"override\" ${selected(\r\n      value,\r\n      \"override\"\r\n    )}>${currency_symbol} : ${override}</option>\r\n    <option value=\"percent\" ${selected(\r\n      value,\r\n      \"percent\"\r\n    )}>% : ${percent}</option>\r\n    <option value=\"fixed\" ${selected(\r\n      value,\r\n      \"fixed\"\r\n    )}>-${currency_symbol} : ${fixed}</option>\r\n  `;\r\n}\r\n\r\n/**\r\n * Get condition options markup.\r\n *\r\n * @since 1.15\r\n * @param condition\r\n */\r\nexport function condition_options(condition: string = \"\"): string {\r\n  const { exactly, anyexcept, morethan, lessthan } =\r\n    acfw_edit_coupon.condition_field_options;\r\n\r\n  return `\r\n    <option value=\"=\" ${selected(condition, \"=\")}>${exactly}</option>\r\n    <option value=\"!=\" ${selected(condition, \"!=\")}>${anyexcept}</option>\r\n    <option value=\">\" ${selected(condition, \">\")}>${morethan}</option>\r\n    <option value=\"<\" ${selected(condition, \"<\")}>${lessthan}</option>\r\n  `;\r\n}\r\n\r\n/**\r\n * Get condtion exists and don't exist options markup.\r\n *\r\n * @since 3.2.1\r\n * @param {string} condition\r\n * @returns {string} Markup\r\n */\r\nexport function condition_exist_options(condition: string = \"\"): string {\r\n  const { exists, notexist } = acfw_edit_coupon.condition_exists_field_option;\r\n\r\n  return `\r\n    <option value=\"exists\" ${selected(condition, \"exists\")}>${exists}</option>\r\n    <option value=\"notexist\" ${selected(\r\n      condition,\r\n      \"notexist\"\r\n    )}>${notexist}</option>\r\n  `;\r\n}\r\n\r\n/**\r\n * Validate url.\r\n *\r\n * @since 1.15\r\n */\r\nexport function validate_url(url: string): boolean {\r\n  const pattern =\r\n    /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\r\n\r\n  return pattern.test(url);\r\n}\r\n\r\n/**\r\n * Format price string to float.\r\n *\r\n * @since 1.3.3\r\n */\r\nexport function price_to_float(price: string): number {\r\n  const { decimal_separator } = acfw_edit_coupon;\r\n  const value = parseFloat(price.replace(decimal_separator, \".\"));\r\n  return !isNaN(value) ? value : 0;\r\n}\r\n","import { esc_attr } from \"../../helper\";\r\n\r\n/**\r\n * Return table product row template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nexport default function table_product_row_template( product: any ) {\r\n\r\n    const { product_id , product_label , condition_label , quantity } = product;\r\n\r\n    return `\r\n    <tr>\r\n        <td class=\"product\" data-product=\"${ esc_attr( JSON.stringify( product ) ) }\" data-product_id=\"${ product_id }\">\r\n            ${ product_label }\r\n        </td>\r\n        <td class=\"condition\">${ condition_label }</td>\r\n        <td class=\"quantity\">${ quantity }</td>\r\n        <td class=\"actions\">\r\n            <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\r\n            <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\r\n        </td>\r\n    </tr>\r\n    `;\r\n}","declare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Return table placeholder row template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nexport default function table_placeholder_row_template( colspan = 4 ) {\r\n\r\n    const { no_products_added } = acfw_edit_coupon;\r\n\r\n    return `\r\n    <tr class=\"no-result\">\r\n        <td colspan=\"${ colspan }\">${ no_products_added }</td>\r\n    </tr>\r\n    `;\r\n}","import table_product_row_template from \"./table_product_row\";\r\nimport table_placeholder_row_template from \"./table_placeholder_row\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst { product_quantity } = acfw_edit_coupon.cart_condition_fields;\r\n\r\n/**\r\n * Register has ordered before custom field.\r\n *\r\n * @since 2.0\r\n */\r\nexport default function register_product_quantity() {\r\n    product_quantity.default_data_value = {};\r\n    product_quantity.template_callback = template;\r\n    product_quantity.scraper_callback = scraper;\r\n}\r\n\r\n/**\r\n * Return product quantity condition field template markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nfunction template(data: any[]): string {\r\n    const { add_product_label } = acfw_edit_coupon;\r\n    const { title, product_col, condition_col, quantity_col } =\r\n        product_quantity;\r\n    let products_markup: string = \"\";\r\n    const exclude: number[] = [];\r\n\r\n    if (data.length) {\r\n        for (let product of data) {\r\n            exclude.push(product.product_id);\r\n            products_markup += table_product_row_template(product);\r\n        }\r\n    } else products_markup = table_placeholder_row_template(4);\r\n\r\n    return `\r\n    <div class=\"product-quantity-condition-field condition-set\"  data-type=\"product-quantity\">\r\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n        <h3 class=\"condition-field-title\">${title}</h3>\r\n        <table class=\"product-quantity-condition-table acfw-styled-table\" data-exclude=\"${JSON.stringify(\r\n            exclude\r\n        )}\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"product\">${product_col}</th>\r\n                    <th class=\"condition\">${condition_col}</th>\r\n                    <th class=\"quantity\">${quantity_col}</th>\r\n                    <th class=\"actions\"></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ${products_markup}\r\n            </tbody>\r\n            <tfoot>\r\n                <tr>\r\n                    <td colspan=\"4\">\r\n                        <a class=\"add-table-row\" href=\"javascript:void(0);\">\r\n                            <i class=\"dashicons dashicons-plus\"></i>\r\n                            ${add_product_label}\r\n                        </a>\r\n                    </td>\r\n                </tr>\r\n            </tfoot>\r\n        </table>\r\n    </div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Product quantity condition field scraper.\r\n *\r\n * @since 2.0\r\n *\r\n * @param condition_field\r\n */\r\nfunction scraper(condition_field: HTMLElement) {\r\n    const rows: NodeListOf<HTMLElement> = condition_field.querySelectorAll(\r\n        \".product-quantity-condition-table tr td.product\"\r\n    );\r\n    const products: string[] = [];\r\n\r\n    rows.forEach((r) => products.push($(r).data(\"product\")));\r\n\r\n    return products;\r\n}\r\n","declare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst { customer_registration_date } = acfw_edit_coupon.cart_condition_fields;\r\n\r\n/**\r\n * Register total customer spend custom field.\r\n * \r\n * @since 2.0\r\n */\r\nexport default function register_customer_last_ordered() {\r\n\r\n    customer_registration_date.template_callback = template;\r\n    customer_registration_date.scraper_callback  = scraper;\r\n}\r\n\r\n/**\r\n * Return custom registration date condition field template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nfunction template( data: number ): string {\r\n\r\n    const { title , desc, hours } = customer_registration_date;\r\n\r\n    return `\r\n    <div class=\"customer-registration-date-field condition-field\" data-type=\"customer-registration-date\">\r\n\r\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n        <h3 class=\"condition-field-title\">${ title }</h3>\r\n\r\n        <label>${ desc }</label>   \r\n        <div class=\"field-control side-label\">\r\n            <input class=\"condition-value\" type=\"number\" min=\"1\" value=\"${ data && data > -1 ? data : 0 }\">\r\n            <label>${ hours }</label>\r\n        </div>\r\n    </div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Customer registration date condition field scraper.\r\n * \r\n * @since 2.0\r\n * \r\n * @param condition_field\r\n */\r\nfunction scraper( condition_field: HTMLElement ) {\r\n\r\n    return parseInt( $( condition_field ).find( \".condition-value\" ).val() );\r\n}","declare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst { customer_last_ordered } = acfw_edit_coupon.cart_condition_fields;\r\n\r\n/**\r\n * Register total customer spend custom field.\r\n * \r\n * @since 2.0\r\n */\r\nexport default function register_customer_last_ordered() {\r\n\r\n    customer_last_ordered.template_callback = template;\r\n    customer_last_ordered.scraper_callback  = scraper;\r\n}\r\n\r\n/**\r\n * Return customer last ordered condition field template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nfunction template( data: number ): string {\r\n\r\n    const { title , desc , hours } = customer_last_ordered;\r\n\r\n    return `\r\n    <div class=\"customer-last-ordered-field condition-field\" data-type=\"customer-last-ordered\">\r\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n        <h3 class=\"condition-field-title\">${ title }</h3>\r\n        <label>${ desc }</label>    \r\n        <div class=\"field-control side-label\">\r\n            <input class=\"condition-value\" type=\"number\" min=\"0\" value=\"${ data && data > -1 ? data : 0 }\">\r\n            <label>${ hours }</label>\r\n        </div>\r\n    </div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Customer last ordered date condition field scraper.\r\n * \r\n * @since 2.0\r\n * \r\n * @param condition_field\r\n */\r\nfunction scraper( condition_field: HTMLElement ) {\r\n\r\n    return parseInt( $( condition_field ).find( \".condition-value\" ).val() );\r\n}","import { condition_options , price_to_float } from \"../../helper\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst { total_customer_spend } = acfw_edit_coupon.cart_condition_fields;\r\n\r\n/**\r\n * Register total customer spend custom field.\r\n * \r\n * @since 2.0\r\n */\r\nexport default function register_total_customer_spend() {\r\n\r\n    total_customer_spend.default_data_value = {};\r\n    total_customer_spend.template_callback  = template;\r\n    total_customer_spend.scraper_callback   = scraper;\r\n}\r\n\r\n/**\r\n * Return total customer spend condition field template markup.\r\n * \r\n * @since 1.15 \r\n * \r\n * @param data \r\n */\r\nfunction template( data: any ): string {\r\n\r\n    const { condition , value , offset } = data;\r\n    const { condition_label } = acfw_edit_coupon;\r\n    const { title, desc, total_spend, days_offset } = total_customer_spend;\r\n    const valueFloat = value ? price_to_float(value) : 0;\r\n\r\n    return `\r\n    <div class=\"total-customer-spend-field condition-field\" data-type=\"total-customer-spend\">\r\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n        <h3 class=\"condition-field-title\">${ title }</h3>\r\n        <label>${ desc }</label>\r\n        <div class=\"field-control\">\r\n            <label>${ condition_label }</label>\r\n            <select class=\"condition-select\">\r\n                ${ condition_options( condition ) }\r\n            </select>\r\n        </div>\r\n        <div class=\"field-control\">\r\n            <label>${ total_spend }</label>\r\n            <input class=\"condition-value wc_input_price\" type=\"text\" min=\"0\" value=\"${ !isNaN(valueFloat) && valueFloat > -1 ? value : 0 }\">\r\n        </div>\r\n        <div class=\"field-control\">\r\n            <label>${ days_offset }</label>\r\n            <input class=\"condition-offset\" type=\"number\" min=\"0\" value=\"${ offset && offset > -1 ? offset : 0 }\">\r\n        </div>\r\n    </div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Total customer spend condition field scraper.\r\n * \r\n * @since 2.0\r\n * \r\n * @param condition_field\r\n */\r\nfunction scraper( condition_field: HTMLElement ) {\r\n\r\n    return { \r\n        condition : $( condition_field ).find( \".condition-select\" ).val(),\r\n        value     : $( condition_field ).find( \".condition-value\" ).val(),\r\n        offset    : $( condition_field ).find( \".condition-offset\" ).val()\r\n    };\r\n}","import { selected } from \"../../helper\";\r\nimport table_product_row_template from \"./table_product_row\";\r\nimport table_placeholder_row_template from \"./table_placeholder_row\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst { has_ordered_before } = acfw_edit_coupon.cart_condition_fields;\r\n\r\n/**\r\n * Register has ordered before custom field.\r\n *\r\n * @since 2.0\r\n */\r\nexport default function register_has_ordered_before() {\r\n    has_ordered_before.default_data_value = {};\r\n    has_ordered_before.template_callback = template;\r\n    has_ordered_before.scraper_callback = scraper;\r\n}\r\n\r\n/**\r\n * Return has ordered before condition field template markup.\r\n *\r\n * @since 2.0\r\n *\r\n * @param data\r\n */\r\nfunction template(data: any = {}): string {\r\n    const { condition, value, products } = data;\r\n    const { cart_condition_fields, add_product_label } = acfw_edit_coupon;\r\n    const { product_col, condition_col, quantity_col } =\r\n        cart_condition_fields.product_quantity;\r\n    const { title, type, within_a_period, number_of_orders, num_prev_days } =\r\n        cart_condition_fields.has_ordered_before;\r\n    const exclude: number[] = [];\r\n    let products_markup: string = \"\";\r\n\r\n    if (products && products.length) {\r\n        for (let product of products) {\r\n            exclude.push(product.product_id);\r\n            products_markup += table_product_row_template(product);\r\n        }\r\n    } else products_markup = table_placeholder_row_template(4);\r\n\r\n    return `\r\n    <div class=\"cart-quantity-field condition-field condition-set\" data-type=\"has-ordered-before\">\r\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n        <h3 class=\"condition-field-title\">${title}</h3>\r\n        <div class=\"field-control\">\r\n            <label>${type}</label>\r\n            <select class=\"condition-select has-ordered-before-type\">\r\n                <option value=\"within-a-period\" ${selected(\r\n                    condition,\r\n                    \"within-a-period\"\r\n                )}>${within_a_period}</option>\r\n                <option value=\"number-of-orders\" ${selected(\r\n                    condition,\r\n                    \"number-of-orders\"\r\n                )}>${number_of_orders}</option>\r\n            </select>\r\n        </div>\r\n        <div class=\"field-control condition-type-value\">\r\n            <label>${num_prev_days}</label>\r\n            <input class=\"condition-value\" type=\"number\" min=\"0\" value=\"${value}\">\r\n        </div>\r\n        <table class=\"has-ordered-before-products-table acfw-styled-table\" data-exclude=\"${JSON.stringify(\r\n            exclude\r\n        )}\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"product\">${product_col}</th>\r\n                    <th class=\"condition\">${condition_col}</th>\r\n                    <th class=\"quantity\">${quantity_col}</th>\r\n                    <th class=\"actions\"></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ${products_markup}\r\n            </tbody>\r\n            <tfoot>\r\n                <tr>\r\n                    <td colspan=\"4\">\r\n                        <a class=\"add-table-row\" href=\"javascript:void(0);\">\r\n                            <i class=\"dashicons dashicons-plus\"></i>\r\n                            ${add_product_label}\r\n                        </a>\r\n                    </td>\r\n                </tr>\r\n            </tfoot>\r\n        </table>\r\n    </div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Has ordered before condition field scraper.\r\n *\r\n * @since 2.0\r\n *\r\n * @param condition_field\r\n */\r\nfunction scraper(condition_field: HTMLElement) {\r\n    const rows: NodeListOf<HTMLElement> = condition_field.querySelectorAll(\r\n        \".has-ordered-before-products-table tr td.product\"\r\n    );\r\n    const products: string[] = [];\r\n\r\n    rows.forEach((r) => products.push($(r).data(\"product\")));\r\n\r\n    return {\r\n        condition: $(condition_field).find(\".condition-select\").val(),\r\n        value: parseInt($(condition_field).find(\".condition-value\").val()),\r\n        products: products,\r\n    };\r\n}\r\n","import { esc_attr , selected } from \"../../helper\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\n\r\nconst { shipping_zone_region } = acfw_edit_coupon.cart_condition_fields;\r\n\r\n/**\r\n * Register shipping zone region custom field.\r\n * \r\n * @since 2.0\r\n */\r\nexport default function register_shipping_zone_region() {\r\n\r\n    shipping_zone_region.default_data_value = {};\r\n    shipping_zone_region.template_callback  = template;\r\n    shipping_zone_region.scraper_callback   = scraper;\r\n}\r\n\r\n/**\r\n * Return shipping zone region condition field template markup.\r\n * \r\n * @since 2.0\r\n * \r\n * @param data \r\n */\r\nfunction template( data: any ): string {\r\n\r\n    const { value } = data;\r\n    const { title , zone_label , zone_placeholder , regions_label , regions_placeholder , zone_options } = shipping_zone_region;\r\n\r\n    const regionsJson = value && value.length ? value : [];\r\n\r\n    return `\r\n    <div class=\"shipping-zone-region-field condition-field\" data-type=\"shipping-zone-region\"\r\n        data-zones=\"${ esc_attr( JSON.stringify( zone_options ) ) }\"\r\n        data-regions=\"${ esc_attr( JSON.stringify( regionsJson ) ) }\">\r\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n        <h3 class=\"condition-field-title\">${ title }</h3>\r\n        <div class=\"field-control\">\r\n            <label>${ zone_label }</label>\r\n            <select class=\"condition-select wc-enhanced-select\" data-placeholder=\"${ esc_attr( zone_placeholder ) }\">\r\n                <option value=\"\">${ zone_placeholder }</option>\r\n                ${ get_zone_options( data , zone_options ) }\r\n            </select>\r\n        </div>\r\n        <div class=\"field-control regions\">\r\n            <label>${ regions_label }</label>\r\n            <select class=\"condition-value wc-enhanced-select\" multiple data-placeholder=\"${ esc_attr( regions_placeholder ) }\">\r\n            </select>\r\n        </div>\r\n    </div>\r\n    `\r\n}\r\n\r\n/**\r\n * Shipping zone region condition field scraper.\r\n * \r\n * @since 2.0\r\n * \r\n * @param condition_field\r\n */\r\nfunction scraper( condition_field: HTMLElement ) {\r\n\r\n    return { \r\n        condition : $( condition_field ).find( \".condition-select\" ).val(),\r\n        value     : $( condition_field ).find( \".condition-value\" ).val() \r\n    };\r\n}\r\n\r\n/**\r\n * Get zone options markup.\r\n * \r\n * @since 2.0\r\n * \r\n * @param data \r\n * @param zone_options \r\n */\r\nfunction get_zone_options( data: any , zone_options: any ): string {\r\n\r\n    const { condition } = data;\r\n    let markup: string = \"\";\r\n\r\n    for ( let zone_id in zone_options ) {\r\n        const zone = zone_options[ zone_id ];\r\n        \r\n        markup += `\r\n            <option value=\"${ zone_id }\" ${ selected( condition , zone_id ) }>\r\n                ${ zone.name }\r\n            </option>\r\n        `;\r\n    }\r\n\r\n    return markup;\r\n}","import { esc_attr, selected } from \"../../helper\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\n\r\nconst { custom_taxonomy } = acfw_edit_coupon.cart_condition_fields;\r\nconst { cart_condition_fields, condition_field_options } = acfw_edit_coupon;\r\n\r\n/**\r\n * Register custom taxonomy cart condition field.\r\n *\r\n * @since 2.0\r\n */\r\nexport default function register_custom_taxonomy() {\r\n  custom_taxonomy.default_data_value = {};\r\n  custom_taxonomy.template_callback = template;\r\n  custom_taxonomy.scraper_callback = scraper;\r\n}\r\n\r\n/**\r\n * Return custom taxonomy condition field template markup.\r\n *\r\n * @since 2.0\r\n *\r\n * @param data\r\n */\r\nfunction template(data: any): string {\r\n  const { condition, value, qtyCondition, quantity } = data;\r\n  const { title, select_taxonomy, product_type, select_terms } =\r\n    custom_taxonomy;\r\n  const { field: quantityLabel } = cart_condition_fields.cart_quantity;\r\n  const { condition_label } = acfw_edit_coupon;\r\n  const { exactly, anyexcept, morethan, lessthan } = condition_field_options;\r\n\r\n  const condOption = qtyCondition ? qtyCondition : \">\";\r\n\r\n  const terms: any = value && value.length ? value : [];\r\n\r\n  return `\r\n    <div class=\"custom-taxonomy-field condition-field\" data-type=\"custom-taxonomy\" \r\n      data-selected_terms=\"${esc_attr(JSON.stringify(terms))}\">\r\n      <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n      <h3 class=\"condition-field-title\">${title}</h3>\r\n      <div class=\"field-control\">\r\n        <select class=\"condition-select wc-enhanced-select custom-taxonomy\" data-placeholder=\"${select_taxonomy}\">\r\n          <option value=\"\">${select_taxonomy}</option>\r\n          ${get_taxonomy_options(condition)}\r\n        </select>\r\n      </div>\r\n      <div class=\"field-control field-control-wide\">\r\n        <select class=\"condition-value wc-enhanced-select\" multiple data-placeholder=\"${select_terms}\">\r\n        </select>\r\n      </div>\r\n      <div class=\"field-control condition\">\r\n            <label>${condition_label}</label>\r\n            <select class=\"condition-select qty-condition-select\">\r\n                <option value=\"=\" ${\r\n                  condOption == \"=\" ? \"selected\" : \"\"\r\n                }>${exactly}</option>\r\n                <option value=\"!=\" ${\r\n                  condOption == \"!=\" ? \"selected\" : \"\"\r\n                }>${anyexcept}</option>\r\n                <option value=\">\" ${\r\n                  condOption == \">\" ? \"selected\" : \"\"\r\n                }>${morethan}</option>\r\n                <option value=\"<\" ${\r\n                  condOption == \"<\" ? \"selected\" : \"\"\r\n                }>${lessthan}</option>\r\n            </select>\r\n        </div>\r\n        <div class=\"field-control quantity\">\r\n            <label>${quantityLabel}</label>\r\n            <input type=\"number\" class=\"condition-quantity\" value=\"${\r\n              typeof quantity === \"number\" ? quantity : 0\r\n            }\" min=\"${qtyCondition == \"<\" ? 1 : 0}\">\r\n        </div>\r\n    </div>\r\n    `;\r\n}\r\n\r\n/**\r\n * Custom taxonomy condition field scraper.\r\n *\r\n * @since 2.0\r\n *\r\n * @param condition_field\r\n */\r\nfunction scraper(condition_field: HTMLElement) {\r\n  return {\r\n    condition: $(condition_field).find(\".condition-select\").val(),\r\n    value: $(condition_field).find(\".condition-value\").val(),\r\n    qtyCondition: $(condition_field).find(\".qty-condition-select\").val(),\r\n    quantity: $(condition_field).find(\".condition-quantity\").val(),\r\n  };\r\n}\r\n\r\n/**\r\n * Get custom taxonomy options markup.\r\n *\r\n * @since 2.0\r\n *\r\n * @param taxonomy\r\n */\r\nfunction get_taxonomy_options(taxonomy: string): string {\r\n  const { tax_options, product_type } = custom_taxonomy;\r\n  let markup = \"\";\r\n\r\n  for (let tax_option of tax_options) {\r\n    const { name, label } = tax_option;\r\n    markup += `\r\n      <option value=\"${name}\" ${selected(taxonomy, name)}>\r\n        ${label}\r\n      </option>\r\n    `;\r\n  }\r\n\r\n  return markup;\r\n}\r\n","import {\r\n  condition_options,\r\n  condition_exist_options,\r\n  selected,\r\n} from \"../../helper\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\n\r\nconst { cart_condition_fields } = acfw_edit_coupon;\r\nconst { custom_user_meta, custom_cart_item_meta } = cart_condition_fields;\r\n\r\nexport default function register_custom_meta() {\r\n  custom_user_meta.default_data_value = {};\r\n  custom_user_meta.template_callback = template;\r\n  custom_user_meta.scraper_callback = scraper;\r\n\r\n  custom_cart_item_meta.default_data_value = {};\r\n  custom_cart_item_meta.template_callback = template;\r\n  custom_cart_item_meta.scraper_callback = scraper;\r\n}\r\n\r\n/**\r\n * Return custom meta condition field template markup.\r\n *\r\n * @since 2.0\r\n * @since 3.2.1 Added exists and not exists condition options.\r\n *\r\n * @param data\r\n */\r\nfunction template(data: any, condition_type: string): string {\r\n  const { condition, key, value, type } = data;\r\n  const { condition_label } = acfw_edit_coupon;\r\n  const { title, meta_key, meta_value, value_type } =\r\n    cart_condition_fields[condition_type];\r\n  const condition_type_class = condition_type.replace(/_/g, \"-\");\r\n\r\n  return `\r\n    <div class=\"${condition_type_class}-field condition-field\" data-type=\"${condition_type_class}\">\r\n      <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n      <h3 class=\"condition-field-title\">${title}</h3>\r\n      <div class=\"field-control wider\">\r\n        <label>${value_type}</label>\r\n        <select class=\"value-type\">\r\n          ${get_type_options(type, condition_type)}\r\n        </select>\r\n      </div>\r\n      <div class=\"field-control\">\r\n        <label>${condition_label}</label>\r\n        <select class=\"condition-select\">\r\n          ${condition_options(condition)}\r\n          ${\r\n            \"custom_cart_item_meta\" === condition_type\r\n              ? condition_exist_options(condition)\r\n              : \"\"\r\n          }\r\n        </select>\r\n      </div>\r\n      <div class=\"field-control wider\">\r\n        <label>${meta_key}</label>\r\n        <input class=\"condition-key\" type=\"text\" value=\"${key ? key : \"\"}\">\r\n      </div>\r\n      <div class=\"field-control wider\">\r\n        <label>${meta_value}</label>\r\n        <input class=\"condition-value\" type=\"text\" value=\"${\r\n          value || value > -1 ? value : \"\"\r\n        }\">\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Custom meta condition field scraper.\r\n *\r\n * @since 2.0\r\n *\r\n * @param condition_field\r\n */\r\nfunction scraper(condition_field: HTMLElement) {\r\n  return {\r\n    condition: $(condition_field).find(\".condition-select\").val(),\r\n    key: $(condition_field).find(\".condition-key\").val(),\r\n    value: $(condition_field).find(\".condition-value\").val(),\r\n    type: $(condition_field).find(\".value-type\").val(),\r\n  };\r\n}\r\n\r\nfunction get_type_options(type: string, condition_type: string): string {\r\n  const { type_options } = cart_condition_fields[condition_type];\r\n  let markup = \"\";\r\n\r\n  for (let key in type_options) {\r\n    const label = type_options[key];\r\n    markup += `<option value=\"${key}\" ${selected(type, key)}>${label}</option>`;\r\n  }\r\n\r\n  return markup;\r\n}\r\n","import { condition_options } from \"../../helper\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\n\r\nconst { number_of_orders } = acfw_edit_coupon.cart_condition_fields;\r\n\r\nexport default function register_number_of_orders() {\r\n  number_of_orders.default_data_value = {};\r\n  number_of_orders.template_callback = template;\r\n  number_of_orders.scraper_callback = scraper;\r\n}\r\n\r\n/**\r\n * Return number of orders condition field template markup.\r\n *\r\n * @since 3.2\r\n *\r\n * @param data\r\n */\r\nfunction template(data: any): string {\r\n  const { condition, value, offset } = data;\r\n  const { condition_label } = acfw_edit_coupon;\r\n  const { title, desc, count_label, prev_days_label } = number_of_orders;\r\n\r\n  return `\r\n    <div class=\"number-of-orders-field cart-quantity-field condition-field\" data-type=\"number-of-orders\">\r\n      <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\r\n      <h3 class=\"condition-field-title\">${title}</h3>\r\n      <label>${desc}</label>\r\n      <div class=\"field-control\">\r\n        <label>${condition_label}</label>\r\n        <select class=\"condition-select\">\r\n            ${condition_options(condition)}\r\n        </select>\r\n      </div>\r\n      <div class=\"field-control\">\r\n          <label>${count_label}</label>\r\n          <input class=\"condition-value\" type=\"number\" min=\"0\" value=\"${\r\n            value >= 0 ? value : \"\"\r\n          }\">\r\n      </div>\r\n      <div class=\"field-control\">\r\n          <label>${prev_days_label}</label>\r\n          <input class=\"condition-offset\" type=\"number\" min=\"0\" value=\"${\r\n            offset >= 0 ? offset : \"\"\r\n          }\">\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Number of orders condition field scraper.\r\n *\r\n * @since 3.2\r\n *\r\n * @param condition_field\r\n */\r\nfunction scraper(condition_field: HTMLElement) {\r\n  return {\r\n    condition: $(condition_field).find(\".condition-select\").val(),\r\n    value: $(condition_field).find(\".condition-value\").val(),\r\n    offset: $(condition_field).find(\".condition-offset\").val(),\r\n  };\r\n}\r\n","import register_product_quantity from \"./fields/product_quantity\";\r\nimport register_customer_registration_date from \"./fields/customer_registration_date\";\r\nimport register_customer_last_ordered from \"./fields/customer_last_ordered\";\r\nimport register_total_customer_spend from \"./fields/total_customer_spend\";\r\nimport register_has_ordered_before from \"./fields/has_ordered_before\";\r\nimport register_shipping_zone_region from \"./fields/shipping_zone_region\";\r\nimport register_custom_taxonomy from \"./fields/custom_taxonomy\";\r\nimport register_custom_meta from \"./fields/custom_meta\";\r\nimport register_number_of_orders from \"./fields/number_of_orders\";\r\n\r\ndeclare var jQuery: any;\r\n\r\nconst $: any = jQuery;\r\n\r\n/**\r\n * Initialize cart conditions and register premium cart condition fields.\r\n *\r\n * @since 2.0\r\n */\r\nexport default function initialize_cart_conditions() {\r\n  const module_block: HTMLElement = document.querySelector(\r\n    \"#acfw_cart_conditions\"\r\n  );\r\n\r\n  register_product_quantity();\r\n  register_customer_registration_date();\r\n  register_customer_last_ordered();\r\n  register_total_customer_spend();\r\n  register_has_ordered_before();\r\n  register_shipping_zone_region();\r\n  register_custom_taxonomy();\r\n  register_custom_meta();\r\n  register_number_of_orders();\r\n\r\n  // restrictions\r\n  $(module_block).on(\r\n    \"change\",\r\n    \"input.condition-value\",\r\n    validate_condition_value_based_on_type\r\n  );\r\n\r\n  $(module_block).on(\r\n    \"change\",\r\n    \".custom-cart-item-meta-field .condition-select\",\r\n    hide_condition_value_field_for_exist_condition_type\r\n  );\r\n}\r\n\r\n/**\r\n * Validate condition value based on type.\r\n *\r\n * @since 2.2.3\r\n */\r\nfunction validate_condition_value_based_on_type() {\r\n  const $value: JQuery = $(this),\r\n    $field: JQuery = $value.closest(\".condition-field\"),\r\n    $type: JQuery<Element> = $field.find(\"select.value-type\");\r\n\r\n  // custom meta number type. make sure we round the value on change.\r\n  if ($type.val() === \"number\") {\r\n    const number = parseInt($value.val() + \"\");\r\n    $value.val(!isNaN(number) ? Math.round(number) : \"\");\r\n  }\r\n}\r\n\r\n/**\r\n * Hide condition value field for \"exists\" and \"notexist\" condition types.\r\n * Used in custom cart item meta condition field.\r\n *\r\n * @since 3.2.1\r\n */\r\nfunction hide_condition_value_field_for_exist_condition_type() {\r\n  const $condition: JQuery = $(this);\r\n  const $field = $condition.closest(\".condition-field\");\r\n  const $value = $field.find(\".condition-value\");\r\n\r\n  if ([\"exists\", \"notexist\"].includes($condition.val().toString())) {\r\n    $value.val(0);\r\n    $value.prop(\"disabled\", true);\r\n    $value.parent().hide();\r\n  } else if (\r\n    [\"exists\", \"notexist\"].includes($condition.data(\"prevValue\")?.toString())\r\n  ) {\r\n    $value.val(\"\");\r\n    $value.prop(\"disabled\", false);\r\n    $value.parent().show();\r\n  }\r\n\r\n  $condition.data(\"prevValue\", $condition.val().toString());\r\n}\r\n","declare var jQuery: any;\r\n\r\nconst $: any = jQuery;\r\nconst module_block: HTMLElement = document.querySelector( \"#acfw_add_products\" );\r\n\r\n/**\r\n * Toggle editing mode.\r\n * \r\n * @since 2.0\r\n * \r\n * @param {toggle} bool True to toggle editing mode, false otherwise.\r\n */\r\nexport function toggle_editing_mode( toggle: boolean ) {\r\n\r\n    $( module_block ).data( \"editing\" , toggle );\r\n    $( module_block ).find( \"#save-add-products\" ).prop( \"disabled\" , ! toggle );\r\n}\r\n","import { esc_attr , discount_type_options, price_to_float } from \"../../helper\";\r\n\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Get markup of table inline edit form.\r\n * \r\n * @since 1.1.0\r\n * \r\n * @param {array}  exclude List of excluded object IDs for search.\r\n * @param {object} data    Object data.\r\n */\r\nexport default function add_edit_row_template( exclude: number[] = [] , data: any = false ) {\r\n\r\n    const { discount_type , discount_value } = data;\r\n    const { edit , add , cancel } = acfw_edit_coupon.product_table_buttons;\r\n    const { type_to_search } = acfw_edit_coupon.bogo_form_fields;\r\n\r\n    const option: string = typeof data == \"object\" ? get_option( data ) : \"\";\r\n    const btnText: string = typeof data == \"object\" ? edit : add;\r\n    const value: string = discount_value && price_to_float(discount_value) >= 0 && discount_type !== 'nodiscount' ? discount_value : \"\";\r\n\r\n    return `\r\n    <tr class=\"add-edit-form adding\">\r\n        <td class=\"product\" data-object=\"${ typeof data == \"object\" ? esc_attr( JSON.stringify(data) ) : 0 }\">\r\n            <div class=\"object-search-wrap\">\r\n                <select class=\"${ \"product-in-cart\" } wc-product-search\"\r\n                    data-placeholder=\"${ type_to_search }\"\r\n                    data-action=\"${ \"acfwp_add_products_search\" }\"\r\n                    data-exclude=\"${ esc_attr( JSON.stringify( exclude ) ) }\">${ option }</select>\r\n            </div>\r\n        </td>\r\n        <td class=\"quantity\">\r\n            <input type=\"number\" class=\"condition-quantity\" value=\"${ typeof data == \"object\" ? data.quantity : 1 }\" min=\"1\">\r\n        </td>\r\n        <td class=\"price\">\r\n            <div>\r\n            <select class=\"discount_type\">\r\n                ${ discount_type_options( discount_type, true ) }\r\n            </select>\r\n            <input type=\"text\" class=\"discount_value short wc_input_price\" value=\"${ value }\">\r\n            </div>\r\n        </td>\r\n        <td class=\"actions\">\r\n            <button type=\"button\" class=\"condition-product-add button-primary\">${ btnText }</button>\r\n            <button type=\"button\" class=\"cancel button\">${ cancel }</button>\r\n        </td>\r\n    </tr>\r\n    `;\r\n}\r\n\r\n/**\r\n * Get select option markup.\r\n * \r\n * @param data \r\n */\r\nfunction get_option( data: any ) {\r\n\r\n    const { product_id , product_label } = data;\r\n    return `<option value=\"${ product_id }\">${ product_label }</option>`;\r\n}","import { esc_attr } from \"../../helper\";\r\n\r\n/**\r\n * Product row template.\r\n * \r\n * @since 1.15\r\n * \r\n * @param data \r\n */\r\nexport default function product_row_template( data: any ) {\r\n\r\n    const { product_id , product_label , quantity , discount_type , discount_value } = data;\r\n    const value: string = discount_type !== \"nodiscount\" ? discount_value : \"\";\r\n\r\n    return `\r\n    <tr>\r\n        <td class=\"product product-${ product_id } object\" data-product=\"${ esc_attr( JSON.stringify(data) ) }\">\r\n            ${ product_label }\r\n        </td>\r\n        <td class=\"quantity\">${ quantity }</td>\r\n        <td class=\"price\">(${ discount_type }) ${ value }</td>\r\n        <td class=\"actions\">\r\n            <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\r\n            <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\r\n        </td>\r\n    </tr>\r\n    `;\r\n}","declare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Get placeholder table row.\r\n * \r\n * @since 1.15\r\n * \r\n * @param colspan \r\n */\r\nexport default function placeholder_table_row_template( colspan: number = 4 ) {\r\n\r\n    const { no_products_added } = acfw_edit_coupon;\r\n\r\n    return `\r\n    <tr class=\"no-result\">\r\n        <td colspan=\"${ colspan }\">${ no_products_added }</td>\r\n    </tr>\r\n    `;\r\n}","import { price_to_float } from \"../helper\";\r\nimport { toggle_editing_mode } from \"./toggles\";\r\nimport add_edit_row_template from \"./templates/add_edit_row\";\r\nimport product_row_template from \"./templates/product_row\";\r\nimport placeholder_table_row_template from \"./templates/placeholder_row\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\n\r\n/**\r\n * Trigger the add table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function trigger_add_table_row_form() {\r\n    const $button: JQuery = $(this),\r\n        $table: JQuery = $button.closest(\".acfw-styled-table\"),\r\n        $tbody: JQuery = $table.find(\"tbody\"),\r\n        exclude: number[] = $table.data(\"exclude\");\r\n\r\n    $tbody.find(\"tr.no-result\").remove();\r\n\r\n    $tbody.append(add_edit_row_template(exclude));\r\n    $tbody.find(\"select.discount_type\").trigger(\"change\");\r\n    $tbody.find(\"select.wc-product-search\").trigger(\"change\");\r\n    $(\"body\").trigger(\"wc-enhanced-select-init\");\r\n}\r\n\r\n/**\r\n * Trigger the edit table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function trigger_edit_table_row_form() {\r\n    const $button: JQuery = jQuery(this),\r\n        $row: JQuery = $button.closest(\"tr\"),\r\n        $table: JQuery = $button.closest(\".acfw-styled-table\"),\r\n        $tbody: JQuery = $table.find(\"tbody\"),\r\n        data: any = $row.find(\".product\").data(\"product\");\r\n\r\n    const { product_id } = data;\r\n    let exclude: number[] = $table.data(\"exclude\");\r\n\r\n    exclude = typeof exclude == \"object\" ? exclude : [];\r\n    exclude.splice(exclude.indexOf(product_id), 1);\r\n    $tbody.find(\"tr.no-result\").remove();\r\n    $row.replaceWith(add_edit_row_template(exclude, data));\r\n    $tbody.find(\"select.discount_type\").trigger(\"change\");\r\n    $tbody.find(\"select.wc-product-search\").trigger(\"acfw_product_select\");\r\n    $table.data(\"exclude\", exclude);\r\n    $table.find(\"select.wc-product-search\").data(\"exclude\", exclude);\r\n    $(\"body\").trigger(\"wc-enhanced-select-init\");\r\n}\r\n\r\n/**\r\n * Actual function that saves/edits the table row.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function add_edit_table_row() {\r\n    const {\r\n        fill_form_propery_error_msg,\r\n        product_exists_in_table,\r\n    } = acfw_edit_coupon;\r\n\r\n    const $button: JQuery = jQuery(this),\r\n        $row: JQuery = $button.closest(\"tr\"),\r\n        $table: JQuery = $button.closest(\"table.acfw-styled-table\"),\r\n        $search: any = $row.find(\".wc-product-search\"),\r\n        $quantity: any = $row.find(\".condition-quantity\"),\r\n        discountType: string = $row\r\n            .find(\"select.discount_type\")\r\n            .val()\r\n            .toString(),\r\n        discountValue: string = $row\r\n            .find(\"input.discount_value\")\r\n            .val()\r\n            .toString();\r\n\r\n    let exclude: number[] = $table.data(\"exclude\");\r\n    const product_id: number = parseInt(\r\n        $row.find(\".wc-product-search\").val().toString()\r\n    );\r\n    const data: any = {\r\n        product_id: product_id,\r\n        quantity: parseInt($row.find(\".condition-quantity\").val().toString()),\r\n        product_label: $row.find(\".wc-product-search option:selected\").text(),\r\n        discount_type: discountType,\r\n        discount_value: discountValue,\r\n    };\r\n\r\n    if (\r\n        !$search.val() ||\r\n        !$quantity.val() ||\r\n        $quantity.val() < 1 ||\r\n        (discountType !== \"nodiscount\" &&\r\n            (isNaN(price_to_float(discountValue)) ||\r\n                price_to_float(discountValue) < 0))\r\n    ) {\r\n        vex.dialog.alert(fill_form_propery_error_msg);\r\n        return;\r\n    }\r\n\r\n    // don't proceed if product has already been added to the table.\r\n    // this happens when the same product has been added to a new row and trying to cancel the row that already has the same value.\r\n    if (exclude.includes(product_id)) {\r\n        vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);\r\n        return;\r\n    }\r\n\r\n    exclude = typeof exclude == \"object\" ? exclude : [];\r\n    exclude.push(product_id);\r\n    $row.replaceWith(product_row_template(data));\r\n    $table.data(\"exclude\", exclude);\r\n    $table.find(\".wc-product-search\").data(\"exclude\", exclude);\r\n    toggle_editing_mode(true);\r\n}\r\n\r\n/**\r\n * Trigger the cancel add/edit table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function cancel_add_edit_table_row() {\r\n    const $button: JQuery = jQuery(this),\r\n        $row: JQuery = $button.closest(\"tr\"),\r\n        $table: JQuery = $button.closest(\"table\"),\r\n        $tbody: JQuery = $row.closest(\"tbody\"),\r\n        colspan: number = $row.find(\"td\").length,\r\n        data: any = $row.find(\"td.product\").data(\"object\");\r\n\r\n    let exclude = $table.data(\"exclude\");\r\n\r\n    // don't proceed if product has already been added to the table.\r\n    // this happens when the same product has been added to a new row and trying to cancel the row that already has the same value.\r\n    if (exclude.includes(data.product_id)) {\r\n        vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);\r\n        return;\r\n    }\r\n\r\n    if (typeof data == \"object\") {\r\n        exclude = typeof exclude == \"object\" ? exclude : [];\r\n        exclude.push(data.product_id);\r\n        $row.replaceWith(product_row_template(data));\r\n        $table.data(\"exclude\", exclude);\r\n        $table.find(\".wc-product-search\").data(\"exclude\", exclude);\r\n    } else {\r\n        $row.remove();\r\n        if ($tbody.find(\"tr\").length <= 0) {\r\n            $tbody.html(placeholder_table_row_template(colspan));\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Remove product in table.\r\n *\r\n * @since 2.0\r\n */\r\nexport function product_table_remove_product() {\r\n    const $button: JQuery = jQuery(this),\r\n        $object_row: JQuery = $button.closest(\"tr\"),\r\n        $table: JQuery = $object_row.closest(\"table\"),\r\n        $tbody: JQuery = $object_row.closest(\"tbody\"),\r\n        colspan: number = $object_row.find(\"td\").length,\r\n        data: any = $object_row.find(\"td.object\").data(\"product\"),\r\n        exclude: number[] = $table.data(\"exclude\"),\r\n        index: number = exclude.indexOf(parseInt(data.product_id));\r\n\r\n    if (index !== -1) exclude.splice(index, 1);\r\n    $table.data(\"exclude\", exclude);\r\n    $table.find(\".wc-product-search\").data(\"exclude\", exclude);\r\n\r\n    $object_row.remove();\r\n\r\n    if ($tbody.find(\"tr\").length <= 0) {\r\n        $tbody.html(placeholder_table_row_template(colspan));\r\n    }\r\n    toggle_editing_mode(true);\r\n}\r\n","import { toggle_overlay } from \"../helper\";\r\nimport { toggle_editing_mode } from \"./toggles\";\r\nimport placeholder_row_template from \"./templates/placeholder_row\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var ajaxurl: string;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var woocommerce_admin_meta_boxes: any;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\nconst { post_id } = woocommerce_admin_meta_boxes;\r\nconst module_block: HTMLElement = document.querySelector(\"#acfw_add_products\");\r\nconst overlay: HTMLElement = module_block\r\n    ? module_block.querySelector(\".acfw-overlay\")\r\n    : null;\r\n\r\n/**\r\n * Save BOGO Deals.\r\n *\r\n * @since 2.0\r\n */\r\nexport function save_add_products_data() {\r\n    // cancel product table edit form rows.\r\n    $(\"#acfw_bogo_deals\")\r\n        .find(\".acfw-styled-table tr.add-edit-form button.cancel\")\r\n        .trigger(\"click\");\r\n\r\n    const { post_status } = acfw_edit_coupon;\r\n    const product_rows: NodeList = module_block.querySelectorAll(\r\n        \"table.acfw-styled-table tbody td.object\"\r\n    );\r\n    const add_before_conditions = module_block.querySelector(\r\n        \".add-before-cart-condition-check-field input[type='checkbox']\"\r\n    );\r\n\r\n    let data: any = [];\r\n    let temp: JQuery;\r\n\r\n    product_rows.forEach((row: HTMLElement) => {\r\n        temp = $(row).data(\"product\");\r\n        if (temp) data.push(temp);\r\n    });\r\n\r\n    toggle_overlay(overlay, \"show\");\r\n\r\n    $.post(\r\n        ajaxurl,\r\n        {\r\n            action: \"acfw_save_add_products_data\",\r\n            coupon_id: post_id,\r\n            products: data.length ? data : \"empty\",\r\n            add_before_conditions: $(add_before_conditions).is(\":checked\")\r\n                ? 1\r\n                : 0,\r\n        },\r\n        (response: any) => {\r\n            if (response.status == \"success\") {\r\n                // if coupon is not published yet, then save it as draft.\r\n                if (post_status !== \"publish\") {\r\n                    if (!$(\"input[name='post_title']\").val())\r\n                        $(\"input[name='post_title']\").val(\"coupon-\" + post_id);\r\n\r\n                    $(\"select[name='post_status']\")\r\n                        .append(new Option(\"Published\", \"publish\"))\r\n                        .val(\"publish\");\r\n\r\n                    $(\"#publishing-action\").append(`\r\n                    <input type=\"hidden\" name=\"publish\" value=\"Publish\">\r\n                `);\r\n                    $(\"input#publish\").click();\r\n                }\r\n            } else {\r\n                if (response.error_msg) {\r\n                    // @TODO change to vex dialog.\r\n                    vex.dialog.alert(response.error_msg);\r\n                    console.log(response);\r\n\r\n                    // Add save error flag class in #acfw_add_products\r\n                    $(module_block).addClass(\"save-error\");\r\n                }\r\n            }\r\n\r\n            $(module_block)\r\n                .find(\"button#clear-add-products\")\r\n                .prop(\"disabled\", false);\r\n            toggle_editing_mode(false);\r\n            toggle_overlay(overlay, \"hide\");\r\n        },\r\n        \"json\"\r\n    );\r\n}\r\n\r\n/**\r\n * Clear \"Add Products\" data.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function clear_add_products_data() {\r\n    const $button = $(this);\r\n\r\n    if (!confirm($button.data(\"prompt\"))) return;\r\n\r\n    const tbody: HTMLElement = module_block.querySelector(\r\n        \"table.acfw-styled-table tbody\"\r\n    );\r\n    toggle_overlay(overlay, \"show\");\r\n\r\n    $.post(\r\n        ajaxurl,\r\n        {\r\n            action: \"acfw_clear_add_products_data\",\r\n            coupon_id: post_id,\r\n            _wpnonce: $button.data(\"nonce\"),\r\n        },\r\n        (response: any) => {\r\n            if (response.status == \"success\") {\r\n                $(tbody).html(placeholder_row_template(4));\r\n                $button.prop(\"disabled\", true);\r\n                toggle_editing_mode(false);\r\n\r\n                // if coupon is not published yet, then save it as draft.\r\n                if ($(\"#post-status-display\").text() != \"Published\") {\r\n                    if (!$(\"input[name='post_title']\").val())\r\n                        $(\"input[name='post_title']\").val(\"coupon-\" + post_id);\r\n\r\n                    $(\"input#publish\").click();\r\n                }\r\n            } else {\r\n                // @TODO change to vex dialog.\r\n                if (response.error_msg) vex.dialog.alert(response.error_msg);\r\n                console.log(response);\r\n            }\r\n\r\n            toggle_overlay(overlay, \"hide\");\r\n        },\r\n        \"json\"\r\n    );\r\n}\r\n\r\n/**\r\n * Save on coupon publish.\r\n *\r\n * @since 1.1.0\r\n *\r\n * @param {e} object Event Object.\r\n */\r\nexport function save_on_coupon_publish(e: Event) {\r\n    // Only run this function if we are in Add Products tab\r\n    if (\r\n        !$(\".coupon_data_tabs\")\r\n            .find(\".acfw_add_products_tab\")\r\n            .hasClass(\"active\")\r\n    )\r\n        return;\r\n\r\n    if (!$(module_block).data(\"editing\")) return;\r\n\r\n    e.preventDefault();\r\n    $(module_block).find(\"#save-add-products\").trigger(\"click\");\r\n\r\n    // delay for 1 second to give time for\r\n    setTimeout(() => {\r\n        // If Add Products displays an error message then don't save the coupon\r\n        if ($(module_block).hasClass(\"save-error\"))\r\n            $(module_block).removeClass(\"save-error\");\r\n        else $(\"form#post\").submit();\r\n    }, 1000);\r\n}\r\n","import { remove_leading_zeros } from \"../helper\";\r\nimport { toggle_editing_mode } from \"./toggles\";\r\nimport {\r\n  trigger_add_table_row_form,\r\n  trigger_edit_table_row_form,\r\n  add_edit_table_row,\r\n  cancel_add_edit_table_row,\r\n  product_table_remove_product,\r\n} from \"./table\";\r\nimport {\r\n  save_add_products_data,\r\n  clear_add_products_data,\r\n  save_on_coupon_publish,\r\n} from \"./save\";\r\nimport product_row_template from \"./templates/product_row\";\r\nimport placeholder_row_template from \"./templates/placeholder_row\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\nconst module_block: HTMLElement = document.querySelector(\"#acfw_add_products\");\r\n\r\nexport default function add_products_module_events($ = jQuery): void {\r\n  $(module_block).on(\r\n    \"click\",\r\n    \".acfw-styled-table tfoot .add-table-row\",\r\n    trigger_add_table_row_form\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \".acfw-styled-table td.actions a.edit\",\r\n    trigger_edit_table_row_form\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"tr.add-edit-form .actions .condition-product-add\",\r\n    add_edit_table_row\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"tr.add-edit-form .actions .cancel\",\r\n    cancel_add_edit_table_row\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \".acfw-styled-table td.actions a.remove\",\r\n    product_table_remove_product\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"button#save-add-products\",\r\n    save_add_products_data\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"button#clear-add-products\",\r\n    clear_add_products_data\r\n  );\r\n  $(module_block).on(\r\n    \"change\",\r\n    \"select.discount_type\",\r\n    disable_discount_value_for_nodiscount\r\n  );\r\n  $(module_block).on(\"blur\", \".wc_input_price\", remove_leading_zeros);\r\n\r\n  $(\"form#post\").on(\"submit\", save_on_coupon_publish);\r\n\r\n  $(module_block).css(\r\n    \"min-height\",\r\n    $(\"#coupon_options ul.coupon_data_tabs\").height() + 10\r\n  );\r\n  $(module_block).on(\"click\", \".acfw-styled-table .actions .remove\", () =>\r\n    toggle_editing_mode(true)\r\n  );\r\n  $(module_block).on(\"change\", \"input[name='add_before_cart_condition']\", () =>\r\n    toggle_editing_mode(true)\r\n  );\r\n\r\n  init_add_products_data();\r\n\r\n  // WC Subscription related.\r\n  $(document).ajaxComplete(listen_product_search_subscription_id_results);\r\n  $(module_block).on(\r\n    \"change\",\r\n    \"select.discount_type\",\r\n    disallow_discount_options_for_subscription\r\n  );\r\n}\r\n\r\n/**\r\n * Initialize product data.\r\n *\r\n * @since 1.15\r\n */\r\nfunction init_add_products_data(): void {\r\n  const products: any = $(module_block).data(\"products\");\r\n  const $tbody = $(module_block).find(\".add-products-data-table tbody\");\r\n\r\n  if (products.length > 0) {\r\n    let markup = \"\";\r\n    products.forEach((product: any) => {\r\n      markup += product_row_template(product);\r\n    });\r\n\r\n    $tbody.html(markup);\r\n  } else {\r\n    $tbody.html(placeholder_row_template(4));\r\n  }\r\n}\r\n\r\n/**\r\n * Disable price value field when discount type value is \"nodiscount\".\r\n *\r\n * @since 1.1.0\r\n */\r\nfunction disable_discount_value_for_nodiscount(): void {\r\n  const $type: JQuery = $(this),\r\n    $row: JQuery = $type.closest(\"tr\"),\r\n    $value: any = $row.find(\".discount_value\");\r\n\r\n  $value.prop(\"disabled\", $type.val() === \"nodiscount\");\r\n}\r\n\r\n/**\r\n * Subscription: listen to product search AJAX and fetch subscription id from header.\r\n *\r\n * @since 2.4.1\r\n *\r\n * @param e\r\n * @param xhr\r\n */\r\nfunction listen_product_search_subscription_id_results(\r\n  e: any,\r\n  xhr: XMLHttpRequest\r\n) {\r\n  const header = xhr.getResponseHeader(\"X-Subscription-IDs\");\r\n\r\n  if (!header) return;\r\n\r\n  let subIds: number[] = $(module_block).data(\"subscription_ids\") || [];\r\n  const newIds: number[] = header.split(\",\").map((id) => parseInt(id));\r\n\r\n  $(module_block).data(\r\n    \"subscription_ids\",\r\n    [...subIds, ...newIds].filter((id, i, self) => self.indexOf(id) === i)\r\n  );\r\n}\r\n\r\n/**\r\n * Subscription: Disallow discounted options for subscription.\r\n *\r\n * @since 2.4.1\r\n */\r\nfunction disallow_discount_options_for_subscription() {\r\n  const subIds: number[] = $(module_block).data(\"subscription_ids\") || [];\r\n\r\n  if (!subIds.length) return;\r\n\r\n  const $this = $(this);\r\n  const $tr = $this.closest(\"tr\");\r\n  const $product = $tr.find(\"select.wc-product-search\");\r\n  const productId = parseInt($product.val());\r\n\r\n  if (!subIds.includes(productId) || \"nodiscount\" === $this.val()) return;\r\n\r\n  vex.dialog.alert($(module_block).data(\"subscription_discount_error\"));\r\n  $this.val(\"nodiscount\");\r\n  $this.trigger(\"change\");\r\n}\r\n","declare var jQuery: any;\r\nvar $: any = jQuery;\r\n\r\n/**\r\n * Auto apply coupons module events script.\r\n *\r\n * @since 2.0\r\n */\r\nexport default function auto_apply_coupon_module_events() {\r\n  $(\"body\").on(\r\n    \"change\",\r\n    \"#customer_email,#acfw_auto_apply_coupon_field,#usage_limit,#usage_limit_per_user,#_acfw_enable_virtual_coupons\",\r\n    display_auto_apply_warning\r\n  );\r\n  $(\"#customer_email,#acfw_auto_apply_coupon_field\").trigger(\"change\");\r\n}\r\n\r\n/**\r\n * Display auto apply warning\r\n *\r\n * @since 2.0\r\n */\r\nfunction display_auto_apply_warning() {\r\n  const $email_field: JQuery = $(\"#customer_email\"),\r\n    usage_limit: number = parseInt($(\"#usage_limit\").val()),\r\n    user_limit: number = parseInt($(\"#usage_limit_per_user\").val()),\r\n    $auto_apply: JQuery = $(\"#acfw_auto_apply_coupon_field\"),\r\n    virtualCoupon: boolean = $(\"#_acfw_enable_virtual_coupons\").is(\":checked\"),\r\n    $warning: JQuery = $(\"#acfw-auto-apply-coupon .auto-apply-warning\");\r\n\r\n  if (\r\n    ($email_field.val() || usage_limit || user_limit || virtualCoupon) &&\r\n    $auto_apply.prop(\"checked\")\r\n  )\r\n    $warning.show();\r\n  else $warning.hide();\r\n}\r\n","declare var jQuery: any;\r\n\r\nvar $: any = jQuery;\r\n\r\n/**\r\n * Populate shipping method options.\r\n * \r\n * @since 1.7\r\n */\r\nexport function set_shipping_method_options() {\r\n\r\n    const $select: JQuery = $(this),\r\n        $row: JQuery      = $select.closest( \"tr\" ),\r\n        $methods: any     = $row.find( \".select-shipping-method\" ),\r\n        $table: JQuery    = $row.closest( \".acfw-styled-table\" ),\r\n        exclude: any[]    = $table.data( \"exclude\" ) || [],\r\n        zones: any[]      = $table.data( \"zonemethods\" ) || [],\r\n        zone: any         = zones.filter( (z) => z.zone_id == $select.val() ),\r\n        methods = zone.length ? zone[0].methods : [];\r\n    \r\n    $methods.empty();\r\n    if ( ! methods.length ) return;\r\n\r\n    methods.map( (method: any) => $methods.append( new Option( method.label , method.value ) ) );\r\n    $methods.trigger( \"change\" );\r\n}\r\n\r\n/**\r\n * Select first option of shipping zone field and trigger to populate shipping method options.\r\n * \r\n * @since 1.7\r\n */\r\nexport function zone_select_first_option( $row: any ) {\r\n\r\n    const $zone: any      = $row.find( \".select-shipping-zone\" ),\r\n        $firstOption: any = $zone.find( \"option:first\" );\r\n\r\n    $row.removeClass( \"fresh\" );\r\n    $zone.val( $firstOption.prop( \"value\" ) );\r\n    $zone.trigger( \"change\" );\r\n}\r\n","declare var jQuery: any;\r\n\r\nconst $: any = jQuery;\r\nconst module_block = document.querySelector( \"#acfw_shipping_overrides\" );\r\n\r\n/**\r\n * Toggle editing mode\r\n * \r\n * @since 1.7\r\n * \r\n * @param {bool} toggle true if editing, false otherwise.\r\n */\r\nexport function toggle_editing_mode( toggle: boolean ) {\r\n\r\n    $( module_block ).data( \"editing\" , toggle );\r\n    $( module_block ).find( \"#save-shipping-overrides\" ).prop( \"disabled\" , ! toggle );\r\n}","\r\ndeclare var acfw_edit_coupon: any;\r\n\r\n/**\r\n * Append blank placeholder table row.\r\n * \r\n * @since 1.7\r\n * \r\n * @param {jQuery element} $tbody  Shipping override row data.\r\n * @param {int}            colspan Table number of columns.\r\n */\r\nexport default function placeholder_row_template( colspan: number ) {\r\n\r\n    const { no_shipping_overrides_added } = acfw_edit_coupon;\r\n    return `\r\n        <tr class=\"no-result\">\r\n            <td colspan=\"${ colspan }\">${ no_shipping_overrides_added }</td>\r\n        </tr>\r\n    `;\r\n}","import { toggle_overlay } from \"../helper\";\r\nimport { toggle_editing_mode } from \"./toggles\";\r\nimport placeholder_row_template from \"./templates/placeholder_row\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var woocommerce_admin_meta_boxes: any;\r\ndeclare var ajaxurl: string;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\nconst module_block: HTMLElement = document.querySelector(\r\n    \"#acfw_shipping_overrides\"\r\n);\r\nconst { post_id } = woocommerce_admin_meta_boxes;\r\n\r\n/**\r\n * Save shipping overrides data.\r\n *\r\n * @since 1.7\r\n */\r\nexport function save_shipping_overrides() {\r\n    const { post_status, no_shipping_overrides_save } = acfw_edit_coupon;\r\n\r\n    const overlay: HTMLElement = module_block.querySelector(\".acfw-overlay\");\r\n    const $button: JQuery = $(this);\r\n    const override_rows: NodeList = module_block.querySelectorAll(\r\n        \".shipping-overrides-table tbody tr td.object\"\r\n    );\r\n\r\n    const data: any[] = [];\r\n    override_rows.forEach((row: HTMLElement) => {\r\n        data.push($(row).data(\"object\"));\r\n    });\r\n\r\n    // if ( ! data.length ) {\r\n    //     vex.dialog.alert( no_shipping_overrides_save )\r\n    //     return;\r\n    // }\r\n\r\n    toggle_overlay(overlay, \"show\");\r\n    $button.prop(\"disabled\", true);\r\n\r\n    $.post(\r\n        ajaxurl,\r\n        {\r\n            action: \"acfw_save_shipping_overrides\",\r\n            coupon_id: post_id,\r\n            overrides: data.length ? data : \"empty\",\r\n        },\r\n        (response: any) => {\r\n            if (response.status == \"success\") {\r\n                // if coupon is not published yet, then save it as draft.\r\n                if (post_status !== \"publish\") {\r\n                    if (!$(\"input[name='post_title']\").val())\r\n                        $(\"input[name='post_title']\").val(\"coupon-\" + post_id);\r\n\r\n                    $(\"select[name='post_status']\")\r\n                        .append(new Option(\"Published\", \"publish\"))\r\n                        .val(\"publish\");\r\n\r\n                    $(\"#publishing-action\").append(`\r\n                    <input type=\"hidden\" name=\"publish\" value=\"Publish\">\r\n                `);\r\n                    $(\"input#publish\").click();\r\n                }\r\n            } else {\r\n                // @TODO change to vex dialog.\r\n                if (response.error_msg) vex.dialog.alert(response.error_msg);\r\n                console.log(response);\r\n            }\r\n\r\n            $(module_block)\r\n                .find(\"#clear-shipping-overrides\")\r\n                .prop(\"disabled\", false);\r\n            toggle_editing_mode(false);\r\n            toggle_overlay(overlay, \"hide\");\r\n        },\r\n        \"json\"\r\n    );\r\n}\r\n\r\n/**\r\n * Clear shipping overrides.\r\n *\r\n * @since 1.15\r\n */\r\nexport function clear_shipping_overrides() {\r\n    const $button: JQuery = $(this);\r\n\r\n    if (!confirm($button.data(\"prompt\"))) return;\r\n\r\n    const $table: JQuery = $(\r\n            module_block.querySelector(\"table.acfw-styled-table\")\r\n        ),\r\n        $tbody: JQuery = $table.find(\"tbody\"),\r\n        overlay: HTMLElement = module_block.querySelector(\".acfw-overlay\");\r\n\r\n    toggle_overlay(overlay, \"show\");\r\n\r\n    $.post(\r\n        ajaxurl,\r\n        {\r\n            action: \"acfw_clear_shipping_overrides\",\r\n            coupon_id: woocommerce_admin_meta_boxes.post_id,\r\n            _wpnonce: $button.data(\"nonce\"),\r\n        },\r\n        (response: any) => {\r\n            if (response.status == \"success\") {\r\n                let colspan = $table.find(\"thead tr th\").length;\r\n                $tbody.html(\"\");\r\n                if ($tbody.find(\"tr\").length <= 0) {\r\n                    $tbody.append(placeholder_row_template(colspan));\r\n                }\r\n                $table.data(\"exclude\", []);\r\n\r\n                $button.prop(\"disabled\", true);\r\n                toggle_editing_mode(false);\r\n\r\n                // if coupon is not published yet, then save it as draft.\r\n                if (jQuery(\"#post-status-display\").text() != \"Published\") {\r\n                    if (!jQuery(\"input[name='post_title']\").val())\r\n                        jQuery(\"input[name='post_title']\").val(\r\n                            \"coupon-\" + post_id\r\n                        );\r\n\r\n                    jQuery(\"input#publish\").click();\r\n                }\r\n            } else {\r\n                // @TODO change to vex dialog.\r\n                if (response.error_msg) vex.dialog.alert(response.error_msg);\r\n                console.log(response);\r\n            }\r\n\r\n            toggle_overlay(overlay, \"hide\");\r\n        },\r\n        \"json\"\r\n    );\r\n}\r\n\r\n/**\r\n * Save on coupon publish.\r\n *\r\n * @since 1.7\r\n *\r\n * @param {e} object Event Object.\r\n */\r\nexport function save_on_coupon_publish(e: Event) {\r\n    if (!$(module_block).data(\"editing\")) return;\r\n\r\n    e.preventDefault();\r\n    $(module_block).find(\"#save-shipping-overrides\").trigger(\"click\");\r\n\r\n    $(\"form#post\").off(\"submit\", save_on_coupon_publish);\r\n\r\n    // delay for 1 second to give time for\r\n    setTimeout(() => {\r\n        $(\"form#post\").submit();\r\n    }, 1000);\r\n}\r\n","import { esc_attr, array_to_select_options , selected, price_to_float } from \"../../helper\";\r\n\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst $: any = jQuery;\r\nconst moduleBlock: HTMLElement = document.querySelector( \"#acfw_shipping_overrides\" );\r\n\r\n/**\r\n * Get add/edit form row markup.\r\n * \r\n * @since 1.7\r\n * \r\n * @param {array}  exclude List of excluded shipping options.\r\n * @param {object} data    Shipping override row data.\r\n */\r\nexport default function add_edit_row_template( data: any = {} ) {\r\n\r\n    const { add , edit , cancel } = acfw_edit_coupon.product_table_buttons;\r\n    const { shipping_zone , discount_type , discount_value } = data;\r\n\r\n    const $table: JQuery     = $( moduleBlock ).find( \".shipping-overrides-table\" );\r\n    const zoneMethods: any[] = $table.data( 'zonemethods' ) || [];\r\n    const zoneOptions: any[] = zoneMethods.map( (zm: any) => ({ value : zm.zone_id , label : zm.zone_name }) );\r\n    const value: string = discount_value && price_to_float(discount_value) >= 0 ? discount_value : \"\";\r\n\r\n    const btnText = shipping_zone >= 0 || shipping_zone === 'nozone' ? edit : add;\r\n    const markup = `\r\n        <tr class=\"add-edit-form fresh\">\r\n            <td class=\"shipping-zone\" data-object=\"${ esc_attr( JSON.stringify( data ) ) }\">\r\n                <div>\r\n                    <select class=\"select-shipping-zone wc-enhanced-select\" data-placeholder=\"Select shipping zone\">\r\n                    ${ array_to_select_options( zoneOptions , shipping_zone ) }\r\n                    </select>\r\n                </div>\r\n            </td>\r\n            <td class=\"shipping-method\">\r\n                <div>\r\n                    <select class=\"select-shipping-method wc-enhanced-select\" data-placeholder=\"Select shipping method\">\r\n                        ${ get_options( zoneMethods , data ) }\r\n                    </select>\r\n                </div>\r\n            </td>\r\n            <td class=\"discount\">\r\n                <select class=\"discount-type\">\r\n                    ${ discount_type_options( discount_type ) }\r\n                </select>\r\n                <input type=\"text\" class=\"discount_value short wc_input_price\" value=\"${ value }\">\r\n            </td>\r\n            <td class=\"actions\">\r\n                <button type=\"button\" class=\"add button-primary\">${ btnText }</button>\r\n                <button type=\"button\" class=\"cancel button\">${ cancel }</button>\r\n            </td>\r\n        </tr>\r\n    `;\r\n\r\n    return markup;\r\n}\r\n\r\n/**\r\n * Get options markup.\r\n * \r\n * @since 1.15\r\n * \r\n * @param exclude \r\n * @param zoneMethods \r\n * @param data \r\n */\r\nfunction get_options( zoneMethods: any[] , data: any ) {\r\n\r\n    const { shipping_zone, shipping_method } = data;\r\n    \r\n    if ( (shipping_zone === 'nozone' && shipping_method ) || (shipping_zone >= 0 && shipping_method) ) {\r\n\r\n        const zoneData: any[] = zoneMethods.filter( zm => zm.zone_id == shipping_zone );\r\n        const methods: any[]  = zoneData.length ? zoneData[0].methods : [];\r\n        return array_to_select_options( methods , shipping_method );\r\n\r\n    } else {\r\n        \r\n        const methods: any[] = zoneMethods.length ? zoneMethods[0].methods : [];\r\n        return array_to_select_options( methods , shipping_method );\r\n    }\r\n}\r\n\r\n/**\r\n * Get discount type select options markup.\r\n * \r\n * @since 1.15\r\n * \r\n * @param value \r\n */\r\nfunction discount_type_options( value: string = \"\" ): string {\r\n    const { currency_symbol, discount_field_options } = acfw_edit_coupon;\r\n    const { override , percent , fixed } = discount_field_options;\r\n\r\n    return `\r\n        <option value=\"percent\" ${ selected( value , \"percent\" ) }>% : ${ percent }</option>\r\n        <option value=\"fixed\" ${ selected( value , \"fixed\" ) }>-${currency_symbol} : ${ fixed }</option>\r\n        <option value=\"override\" ${ selected( value , \"override\" ) }>${currency_symbol} : ${ override }</option>\r\n    `;\r\n}","import { esc_attr } from \"../../helper\";\r\n\r\ndeclare var jQuery: any;\r\n\r\nconst $: any = jQuery;\r\nconst moduleBlock: HTMLElement = document.querySelector( \"#acfw_shipping_overrides\" );\r\n\r\n/**\r\n * Get shipping override table row markup.\r\n * \r\n * @since 1.7\r\n * \r\n * @param {object} object Shipping override row data.\r\n */\r\nexport default function table_row_template( object: any ) {\r\n\r\n    const { shipping_zone , discount_type , discount_value, shipping_method } = object;\r\n\r\n    const $table: JQuery   = $( moduleBlock ).find( \".shipping-overrides-table\" );\r\n    const zoneMethods: any = $table.data( 'zonemethods' ) || [];\r\n    const zoneData: any    = zoneMethods.filter( ( zm: any ) => zm.zone_id == shipping_zone );\r\n\r\n    if ( ! zoneData.length ) return; \r\n\r\n    const { zone_name , methods } = zoneData[0];\r\n    const selectedMethod: any = methods.filter( ( m: any ) => m.value == shipping_method );\r\n\r\n    if ( ! selectedMethod.length ) return;\r\n\r\n    return `\r\n    <tr>\r\n        <td class=\"shipping-zone object\" data-object=\"${ esc_attr( JSON.stringify( object ) ) }\">\r\n            ${ zone_name }\r\n        </td>\r\n        <td class=\"shipping-method\">\r\n            ${ selectedMethod[0].label }\r\n        </td>\r\n        <td class=\"discount\">\r\n            (${ discount_type }) ${ discount_value }\r\n        </td>\r\n        <td class=\"actions\">\r\n            <a class=\"edit\" href=\"javascript:void(0);\">\r\n                <span class=\"dashicons dashicons-edit\"></span>\r\n            </a>\r\n            <a class=\"remove\" href=\"javascript:void(0);\">\r\n                <span class=\"dashicons dashicons-no\"></span>\r\n            </a>\r\n        </td>\r\n    </tr>\r\n    `\r\n}","import { toggle_editing_mode } from \"./toggles\";\r\nimport { zone_select_first_option } from \"./actions\";\r\nimport add_edit_row_template from \"./templates/add_edit_row\";\r\nimport table_row_template from \"./templates/table_row\";\r\nimport placeholder_row_template from \"./templates/placeholder_row\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var vex: any;\r\n\r\nconst $: any = jQuery;\r\n\r\n/**\r\n * Add shipping override row with form fields.\r\n *\r\n * @since 1.7\r\n */\r\nexport function trigger_add_table_row() {\r\n    const $button: JQuery = $(this),\r\n        $table: JQuery = $button.closest(\".acfw-styled-table\"),\r\n        $tbody: JQuery = $table.find(\"tbody\"),\r\n        exclude: number[] = $table.data(\"exclude\") || [];\r\n\r\n    $tbody.find(\"tr.no-result\").remove();\r\n\r\n    // append add form markup.\r\n    $tbody.append(add_edit_row_template());\r\n    $(\"body\").trigger(\"wc-enhanced-select-init\");\r\n\r\n    // select first option.\r\n    const $row = $table.find(\"tr.add-edit-form.fresh\");\r\n    zone_select_first_option($row);\r\n}\r\n\r\n/**\r\n * Add/edit shipping method overrides.\r\n *\r\n * @since 1.7\r\n */\r\nexport function add_edit_shipping_override() {\r\n    const {\r\n        fill_form_propery_error_msg,\r\n        shipping_zone_already_added,\r\n    } = acfw_edit_coupon;\r\n\r\n    const $button: JQuery = $(this),\r\n        $row: JQuery = $button.closest(\"tr\"),\r\n        $table: JQuery = $row.closest(\".acfw-styled-table\");\r\n\r\n    let shipZone: string | number = parseInt(\r\n            $row.find(\".select-shipping-zone\").val() + \"\"\r\n        ),\r\n        shipMethod: string | number =\r\n            $row.find(\".select-shipping-method\").val() + \"\";\r\n\r\n    shipZone = shipZone >= 0 && !isNaN(shipZone) ? shipZone : \"nozone\";\r\n\r\n    let exclude: any[] = $table.data(\"exclude\");\r\n\r\n    if (\r\n        (shipZone < 0 || !shipMethod) &&\r\n        !(shipZone === \"nozone\" && shipMethod)\r\n    ) {\r\n        vex.dialog.alert(fill_form_propery_error_msg);\r\n        return;\r\n    }\r\n\r\n    if (\r\n        exclude.filter((sm) => sm.zone == shipZone && sm.method == shipMethod)\r\n            .length\r\n    ) {\r\n        vex.dialog.alert(shipping_zone_already_added);\r\n        return;\r\n    }\r\n\r\n    const object = {\r\n        shipping_zone: shipZone,\r\n        shipping_method: shipMethod,\r\n        discount_type: $row.find(\".discount-type\").val(),\r\n        discount_value: $row.find(\".discount_value\").val(),\r\n    };\r\n\r\n    $row.replaceWith(table_row_template(object));\r\n    exclude.push({ zone: shipZone, method: shipMethod });\r\n    $table.data(\"exclude\", exclude);\r\n    toggle_editing_mode(true);\r\n}\r\n\r\n/**\r\n * Trigger edit form display.\r\n *\r\n * @since 1.7\r\n */\r\nexport function trigger_edit_table_row_form() {\r\n    const $button: JQuery = jQuery(this),\r\n        $row: JQuery = $button.closest(\"tr\"),\r\n        $table: JQuery = $button.closest(\".acfw-styled-table\"),\r\n        $tbody: JQuery = $table.find(\"tbody\"),\r\n        object: any = $row.find(\".shipping-zone\").data(\"object\");\r\n\r\n    let exclude: any[] = $table.data(\"exclude\") || [];\r\n\r\n    exclude = exclude.filter(\r\n        (sm: any) =>\r\n            sm.zone != object.shipping_zone ||\r\n            sm.method != object.shipping_method\r\n    );\r\n    $tbody.find(\"tr.no-result\").remove();\r\n    $row.replaceWith(add_edit_row_template(object));\r\n    $table.data(\"exclude\", exclude);\r\n    $(\"body\").trigger(\"wc-enhanced-select-init\");\r\n}\r\n\r\n/**\r\n * Remove shipping override row.\r\n *\r\n * @since 1.7\r\n */\r\nexport function remove_shipping_override_row() {\r\n    const $button: JQuery = jQuery(this),\r\n        $row: JQuery = $button.closest(\"tr\"),\r\n        $table: JQuery = $button.closest(\"table\"),\r\n        $tbody: JQuery = $row.closest(\"tbody\"),\r\n        colspan: number = $row.find(\"td\").length,\r\n        object: any = $row.find(\"td.shipping-zone\").data(\"object\");\r\n\r\n    let exclude: any[] = $table.data(\"exclude\");\r\n\r\n    exclude = exclude.filter(\r\n        (sm: any) =>\r\n            sm.zone != object.shipping_zone ||\r\n            sm.method != object.shipping_method\r\n    );\r\n    $table.data(\"exclude\", exclude);\r\n\r\n    $row.remove();\r\n\r\n    if ($tbody.find(\"tr\").length <= 0) {\r\n        $tbody.append(placeholder_row_template(colspan));\r\n    }\r\n    toggle_editing_mode(true);\r\n}\r\n\r\n/**\r\n * Cancel add edit table row.\r\n *\r\n * @since 1.7\r\n */\r\nexport function cancel_add_edit_table_row() {\r\n    const { shipping_zone_already_added } = acfw_edit_coupon;\r\n\r\n    const $button: JQuery = jQuery(this),\r\n        $row: JQuery = $button.closest(\"tr\"),\r\n        $table: JQuery = $button.closest(\"table\"),\r\n        $tbody: JQuery = $row.closest(\"tbody\"),\r\n        colspan: number = $row.find(\"td\").length,\r\n        object: any = $row.find(\"td.shipping-zone\").data(\"object\");\r\n\r\n    const { shipping_zone, shipping_method } = object;\r\n    let exclude: any[] = $table.data(\"exclude\");\r\n\r\n    if (\r\n        exclude.filter(\r\n            (sm) => sm.zone == shipping_zone && sm.method == shipping_method\r\n        ).length\r\n    ) {\r\n        vex.dialog.alert(shipping_zone_already_added);\r\n        return;\r\n    }\r\n\r\n    if (\r\n        (shipping_zone === \"nozone\" && shipping_method) ||\r\n        (shipping_zone >= 0 && shipping_method)\r\n    ) {\r\n        exclude.push({ zone: shipping_zone, method: shipping_zone });\r\n        $row.replaceWith(table_row_template(object));\r\n        $table.data(\"exclude\", exclude);\r\n    } else {\r\n        $row.remove();\r\n        if ($tbody.find(\"tr\").length <= 0) {\r\n            $tbody.append(placeholder_row_template(colspan));\r\n        }\r\n    }\r\n}\r\n","import {\r\n  toggle_overlay,\r\n  esc_attr,\r\n  remove_leading_zeros,\r\n  array_to_select_options,\r\n} from \"../helper\";\r\nimport { set_shipping_method_options } from \"./actions\";\r\nimport {\r\n  save_shipping_overrides,\r\n  clear_shipping_overrides,\r\n  save_on_coupon_publish,\r\n} from \"./save\";\r\nimport {\r\n  trigger_add_table_row,\r\n  add_edit_shipping_override,\r\n  trigger_edit_table_row_form,\r\n  remove_shipping_override_row,\r\n  cancel_add_edit_table_row,\r\n} from \"./table\";\r\nimport table_row_template from \"./templates/table_row\";\r\n\r\ndeclare var jQuery: any;\r\n\r\nconst $: any = jQuery;\r\nconst module_block: HTMLElement = document.querySelector(\r\n  \"#acfw_shipping_overrides\"\r\n);\r\n\r\n/**\r\n * Shipping override modules events script.\r\n *\r\n * @since 1.7\r\n *\r\n * @param object $ jQuery object.\r\n */\r\nexport default function shipping_overrides_events() {\r\n  $(module_block).on(\r\n    \"click\",\r\n    \".acfw-styled-table tfoot .add-table-row\",\r\n    trigger_add_table_row\r\n  );\r\n  $(module_block).on(\r\n    \"change\",\r\n    \"tr.add-edit-form .select-shipping-zone\",\r\n    set_shipping_method_options\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"tr.add-edit-form .actions .add\",\r\n    add_edit_shipping_override\r\n  );\r\n  $(module_block).on(\"click\", \"tr .actions .edit\", trigger_edit_table_row_form);\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"tr .actions .remove\",\r\n    remove_shipping_override_row\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"tr.add-edit-form .actions .cancel\",\r\n    cancel_add_edit_table_row\r\n  );\r\n  $(module_block).on(\"blur\", \".wc_input_price\", remove_leading_zeros);\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"#save-shipping-overrides\",\r\n    save_shipping_overrides\r\n  );\r\n  $(module_block).on(\r\n    \"click\",\r\n    \"#clear-shipping-overrides\",\r\n    clear_shipping_overrides\r\n  );\r\n\r\n  $(\"form#post\").on(\"submit\", save_on_coupon_publish);\r\n  $(module_block).css(\r\n    \"min-height\",\r\n    $(\"#coupon_options ul.coupon_data_tabs\").height() + 10\r\n  );\r\n\r\n  populate_saved_data();\r\n}\r\n\r\n/**\r\n * Populate saved data.\r\n *\r\n * @since 1.7\r\n */\r\nfunction populate_saved_data() {\r\n  const $table: JQuery = $(module_block).find(\".shipping-overrides-table\");\r\n  const $tbody: JQuery = $table.find(\"tbody\");\r\n  const overrides = $table.data(\"overrides\");\r\n\r\n  if (!overrides.length) return;\r\n\r\n  $tbody.find(\"tr.no-result\").remove();\r\n  overrides.forEach((object: any) => {\r\n    $tbody.append(table_row_template(object));\r\n  });\r\n}\r\n","declare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var vex: any;\r\n\r\nconst $ = jQuery;\r\nlet isValidating = false;\r\n\r\n/**\r\n * Edit link scheduler fields script.\r\n *\r\n * @since 2.0\r\n * @since 3.5 Moved date range scheduler related code to ACFWF.\r\n *\r\n * @param object $ jQuery object.\r\n */\r\nexport default function edit_link_scheduler_fields() {\r\n  const scheduler_tab: HTMLElement = document.querySelector(\"#acfw_scheduler\");\r\n\r\n  $(scheduler_tab).on(\r\n    \"change acfw_load\",\r\n    '.days-time-fields input[type=\"checkbox\"]',\r\n    toggleDayTimeFields\r\n  );\r\n\r\n  $(scheduler_tab).on(\r\n    \"change acfw_load\",\r\n    \".days-time-fields input.time-field\",\r\n    updateTimeMinMaxValues\r\n  );\r\n\r\n  $(scheduler_tab).on(\r\n    \"change\",\r\n    \".days-time-fields input.time-field\",\r\n    validateTimeInputFields\r\n  );\r\n\r\n  $(scheduler_tab).on(\r\n    \"change acfw_load\",\r\n    \".acfw-scheduler-section .date-field\",\r\n    toggleAvailableDayFields\r\n  );\r\n\r\n  $(scheduler_tab)\r\n    .find(\r\n      '.days-time-fields input[type=\"checkbox\"], .days-time-fields input.time-field'\r\n    )\r\n    .trigger(\"acfw_load\");\r\n\r\n  $(scheduler_tab)\r\n    .find(\".acfw-scheduler-section .date-field\")\r\n    .trigger(\"acfw_load\");\r\n\r\n  $(\".wrap\").on(\"submit\", \"form#post\", validateBeforeSaveCoupon);\r\n\r\n  initTimeFields();\r\n}\r\n\r\nfunction initTimeFields() {\r\n  $(\".days-time-fields input.time-field\").flatpickr({\r\n    allowInput: true,\r\n    enableTime: true,\r\n    noCalendar: true,\r\n    altInput: true,\r\n    altFormat: \"h:i K\",\r\n    dateFormat: \"H:i\",\r\n    onOpen: function (selectedDates: Date[], dateStr: string, instance: any) {\r\n      if (\"\" === dateStr) {\r\n        var defaultTime = new Date();\r\n        defaultTime.setHours(0);\r\n        defaultTime.setMinutes(0);\r\n        instance.setDate(defaultTime);\r\n\r\n        $(\".days-time-fields input.time-field\").trigger(\"change\");\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\nfunction validateBeforeSaveCoupon(e: any) {\r\n  if ($(\".days-time-fields input.time-field\").hasClass(\"error\")) {\r\n    e.preventDefault();\r\n\r\n    // display error message.\r\n    vex.dialog.alert({\r\n      unsafeMessage: acfw_edit_coupon.invalid_scheduler_time,\r\n    });\r\n\r\n    // re-enable publish button\r\n    $(\"#publishing-action .spinner\").removeClass(\"is-active\");\r\n    $(\"#publishing-action #publish\").removeClass(\"disabled\");\r\n  }\r\n}\r\n\r\n/**\r\n * Handle enable/disable of time input fields when the relative day checkbox is checked/unchecked.\r\n *\r\n * @since 3.5\r\n */\r\nfunction toggleDayTimeFields() {\r\n  const $checkbox = $(this);\r\n  const $wrapper = $checkbox.closest(\".days-time-field\");\r\n\r\n  $wrapper\r\n    .find(\".start-time\")\r\n    .prop(\"disabled\", !$checkbox.is(\":checked\") || $checkbox.is(\":disabled\"));\r\n  $wrapper\r\n    .find(\".end-time\")\r\n    .prop(\"disabled\", !$checkbox.is(\":checked\") || $checkbox.is(\":disabled\"));\r\n}\r\n\r\n/**\r\n * Update the min/max attributes of the time input fields whenever its relative value is changed.\r\n *\r\n * @since 3.5\r\n */\r\nfunction updateTimeMinMaxValues() {\r\n  const $wrapper = $(this).closest(\".days-time-field\");\r\n  const $startTime = $wrapper.find(\".start-time\");\r\n  const $endTime = $wrapper.find(\".end-time\");\r\n  const endMinutes = getMinutesTotal($endTime.val()) + 1;\r\n  const startMinutes = getMinutesTotal($startTime.val()) - 1;\r\n  const maxTime = endMinutes ? getTimeFromMinutes(endMinutes) : \"\";\r\n  const minTime = startMinutes ? getTimeFromMinutes(startMinutes) : \"\";\r\n\r\n  $startTime.attr(\"max\", maxTime ?? \"\");\r\n  $endTime.attr(\"min\", minTime ?? \"\");\r\n}\r\n\r\n/**\r\n * Validate time input fields by adding a red border when the time values set are invalid.\r\n *\r\n * @since 3.5\r\n */\r\nfunction validateTimeInputFields() {\r\n  const $wrapper = $(this).closest(\".days-time-field\");\r\n  const $startTime = $wrapper.find(\".start-time\");\r\n  const $endTime = $wrapper.find(\".end-time\");\r\n  const startMinutes = getMinutesTotal($startTime.val());\r\n  const endMinutes = getMinutesTotal($endTime.val());\r\n\r\n  if (startMinutes >= endMinutes) {\r\n    $startTime.addClass(\"error\");\r\n  } else {\r\n    $startTime.removeClass(\"error\");\r\n  }\r\n\r\n  if (endMinutes <= startMinutes) {\r\n    $endTime.addClass(\"error\");\r\n  } else {\r\n    $endTime.removeClass(\"error\");\r\n  }\r\n}\r\n\r\n/**\r\n * Toggle enable/disable for the time fields based on the start day and end day date range.\r\n *\r\n * @since 3.5\r\n */\r\nfunction toggleAvailableDayFields() {\r\n  const $wrapper = $(this).closest(\".options_group\");\r\n  const $startDay = $wrapper.find(\"#_acfw_schedule_start\");\r\n  const $endDay = $wrapper.find(\"#_acfw_schedule_expire\");\r\n\r\n  const availableDays = getAvailableDaysFromRange(\r\n    !$startDay.is(\":disabled\") ? $startDay.val() : \"\",\r\n    !$startDay.is(\":disabled\") ? $endDay.val() : \"\"\r\n  );\r\n\r\n  getDays().forEach((day) => {\r\n    const $fieldWrapper = $(`.${day}-time-field`);\r\n\r\n    if (availableDays.includes(day)) {\r\n      $fieldWrapper\r\n        .find('input[type=\"checkbox\"]')\r\n        .prop(\"disabled\", false)\r\n        .trigger(\"change\");\r\n    } else {\r\n      $fieldWrapper.find('input[type=\"checkbox\"]').prop(\"disabled\", true);\r\n      $fieldWrapper.find(\".time-field\").prop(\"disabled\", true);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Get the total minutes for a given time.\r\n *\r\n * @since 3.5\r\n *\r\n * @param {string} time Time value e.g '15:00'\r\n * @returns {int} Total minutes\r\n */\r\nfunction getMinutesTotal(time: string) {\r\n  const [hour, minute] = time.split(\":\").map((n) => parseInt(n));\r\n  return hour * 60 + minute;\r\n}\r\n\r\n/**\r\n * Get the time value by a given total minutes value.\r\n *\r\n * @since 3.5\r\n *\r\n * @param {int} minutes Total minutes value\r\n * @returns {string} Time value\r\n */\r\nfunction getTimeFromMinutes(minutes: number) {\r\n  const hour = Math.floor(minutes / 60);\r\n  const minute = minutes - hour * 60;\r\n\r\n  return `${String(hour).padStart(2, \"0\")}:${String(minute).padStart(2, \"0\")}`;\r\n}\r\n\r\n/**\r\n * Get available days based on a given start day and end day date range.\r\n *\r\n * @since 3.5\r\n *\r\n * @param {string} startDay Start day (e.g. 2022-08-01)\r\n * @param {string} endDay End day (e.g. 2022-08-31)\r\n * @returns {string[]} List of available days\r\n */\r\nfunction getAvailableDaysFromRange(startDay: string, endDay: string) {\r\n  const days = getDays();\r\n  const availableDays = [];\r\n\r\n  // return all days when either startDay or enDay values are not available.\r\n  if (!startDay || !endDay) {\r\n    return days;\r\n  }\r\n\r\n  for (\r\n    const d = new Date(startDay);\r\n    d <= new Date(endDay);\r\n    d.setDate(d.getDate() + 1)\r\n  ) {\r\n    availableDays.push(days[d.getDay()]);\r\n  }\r\n\r\n  return [...new Set(availableDays)];\r\n}\r\n\r\n/**\r\n * Return a list of all days in a week.\r\n *\r\n * @returns {string[]} List of days in a week.\r\n */\r\nfunction getDays() {\r\n  return [\r\n    \"sunday\",\r\n    \"monday\",\r\n    \"tuesday\",\r\n    \"wednesday\",\r\n    \"thursday\",\r\n    \"friday\",\r\n    \"saturday\",\r\n  ];\r\n}\r\n","declare var jQuery: any;\r\ndeclare var ajaxurl: string;\r\ndeclare var acfw_edit_coupon: any;\r\ndeclare var woocommerce_admin_meta_boxes: any;\r\n\r\nconst $ = jQuery;\r\n\r\nconst { bogo_toggle_editing_mode } = acfw_edit_coupon;\r\nconst { post_id } = woocommerce_admin_meta_boxes;\r\n\r\n/**\r\n * BOGO Deals events.\r\n *\r\n * @since 2.4\r\n */\r\nexport default function bogo_deals_events() {\r\n  const module_block: HTMLElement = document.querySelector(\"#acfw_bogo_deals\");\r\n\r\n  $(module_block).on(\r\n    \"change acfw_load\",\r\n    \"select#bogo-deals-type\",\r\n    toggle_auto_add_products_field\r\n  );\r\n\r\n  $(module_block).on(\r\n    \"change acfw_load\",\r\n    \"select#bogo-condition-type,select#bogo-deals-type\",\r\n    disable_repeatedly_any_products_deal\r\n  );\r\n\r\n  $(module_block).on(\r\n    \"change acfw_load\",\r\n    \".bogo-auto-add-products-field input[type='checkbox']\",\r\n    () => bogo_toggle_editing_mode(true)\r\n  );\r\n  $(module_block).on(\"save_bogo_deals\", save_additional_settings);\r\n  $(module_block).find(\"select#bogo-deals-type\").trigger(\"acfw_load\");\r\n}\r\n\r\n/**\r\n * Toggle auto add products field.\r\n *\r\n * @since 2.4\r\n */\r\nfunction toggle_auto_add_products_field() {\r\n  const $this = $(this);\r\n  const $module = $this.closest(\"#acfw_bogo_deals\");\r\n  const $field = $module.find(\".bogo-auto-add-products-field\");\r\n  const $input = $field.find(\"input[type='checkbox']\");\r\n  const applyType = $this.val();\r\n\r\n  if (applyType === \"specific-products\") {\r\n    $input.prop(\"disabled\", false);\r\n    $field.addClass(\"show\");\r\n  } else {\r\n    $input.prop(\"disabled\", false);\r\n    $field.removeClass(\"show\");\r\n  }\r\n}\r\n\r\n/**\r\n * Save additional BOGO settings.\r\n *\r\n * @since 2.4\r\n */\r\nfunction save_additional_settings() {\r\n  const $deal_type = $(this).find(\"select#bogo-deals-type\");\r\n  const $auto_add_products = $(this).find(\r\n    \".bogo-auto-add-products-field input[type='checkbox']\"\r\n  );\r\n  const applyType = $deal_type.val();\r\n\r\n  if (applyType !== \"specific-products\") return;\r\n\r\n  $.post(ajaxurl, {\r\n    action: \"acfw_save_bogo_additional_settings\",\r\n    coupon_id: post_id,\r\n    auto_add_products: $auto_add_products.is(\":checked\") ? \"yes\" : \"no\",\r\n  });\r\n}\r\n\r\n/**\r\n * Disable repeat deal option when deal type is set to \"any-products\" and trigger type is not \"any-products\".\r\n *\r\n * @since 2.6\r\n */\r\nfunction disable_repeatedly_any_products_deal() {\r\n  const $module = $(\"#acfw_bogo_deals\");\r\n  const $onceOption = $module.find(\"input[name='bogo_type'][value='once']\");\r\n  const $repeatOption = $module.find(\"input[name='bogo_type'][value='repeat']\");\r\n  const triggerType = $module.find(\"#bogo-condition-type\").val();\r\n  const dealType = $module.find(\"#bogo-deals-type\").val();\r\n\r\n  $module.find(\".repeat-incompatible\").remove();\r\n\r\n  if (\"any-products\" === dealType && \"any-products\" !== triggerType) {\r\n    $onceOption.prop(\"checked\", true);\r\n    $repeatOption.prop(\"disabled\", true);\r\n    $repeatOption\r\n      .closest(\".radio-group-wrap\")\r\n      .append(\r\n        `<span class=\"repeat-incompatible\">${acfw_edit_coupon.repeat_incompatible_notice}</span>`\r\n      );\r\n  } else {\r\n    $repeatOption.prop(\"disabled\", false);\r\n  }\r\n}\r\n","declare var jQuery: any;\r\ndeclare var vex: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst module: HTMLElement = document.querySelector('.acfw-sort-coupon-priority-field');\r\nconst $ = jQuery;\r\n\r\n/**\r\n * Coupon sort events.\r\n * \r\n * @since 2.5\r\n */\r\nexport default function coupon_sort_events() {\r\n\r\n    $(module).on(\"change\", \"select#_acfw_coupon_sort_select\", toggleCustomSortValueField);\r\n    $(module).on(\"change\", \"input#_acfw_coupon_sort_priority\", validateCustomSortValue);\r\n    $(module).find(\"select#_acfw_coupon_sort_select\").trigger(\"change\");\r\n};\r\n\r\n/**\r\n * Toggle custom sort value field.\r\n * \r\n * @since 2.5\r\n */\r\nfunction toggleCustomSortValueField() {\r\n\r\n    const $this: JQuery = $(this);\r\n    const $customField: JQuery = $(module).find(\"input#_acfw_coupon_sort_priority\");\r\n    const value: string = $this.val().toString();\r\n\r\n    switch ( value ) {\r\n\r\n        case \"0\":\r\n        case \"1\" :\r\n        case \"10\":\r\n        case \"30\":\r\n        case \"50\" :\r\n        case \"90\" :\r\n            $customField.hide();\r\n            $customField.val( value );\r\n            break;\r\n\r\n        case \"custom\":\r\n        default :\r\n            $customField.show();\r\n            $customField.val( $(module).data('value') );\r\n    }\r\n}\r\n\r\n/**\r\n * Validate custom sort value, make sure its not negative or invalid.\r\n * \r\n * @since 2.5\r\n */\r\nfunction validateCustomSortValue() {\r\n\r\n    const $this = $(this);\r\n    const sortValue = parseInt($this.val());\r\n\r\n    if ( isNaN(sortValue) || 1 > sortValue ) {\r\n        vex.dialog.alert(acfw_edit_coupon.coupon_sort_invalid);\r\n        $this.val('');\r\n    }\r\n}","declare var jQuery: any;\r\n\r\nconst $ = jQuery;\r\n\r\n/**\r\n * Virtual Coupon related events.\r\n *\r\n * @since 3.0\r\n */\r\nexport default function events() {\r\n  $(\"body\").on(\r\n    \"change load_virtual_coupon\",\r\n    \"#_acfw_enable_virtual_coupons\",\r\n    toggleVirtualCouponsFeature\r\n  );\r\n\r\n  $(\"#_acfw_enable_virtual_coupons\").trigger(\"load_virtual_coupon\");\r\n}\r\n\r\n/**\r\n * Toggle Virtual Coupons.\r\n *\r\n * @since 3.0\r\n */\r\nfunction toggleVirtualCouponsFeature(e: any) {\r\n  // @ts-ignore\r\n  const $checkbox = jQuery(this);\r\n  const $inside = $checkbox.closest(\".inside\");\r\n  const $allowedCustomersField = $(\"select.acfw-allowed-customers\");\r\n\r\n  if (\"change\" === e.type) {\r\n    $inside.find(\".save-notice\").show();\r\n  }\r\n\r\n  if ($checkbox.is(\":checked\")) {\r\n    $inside.removeClass(\"disabled\");\r\n    $allowedCustomersField.prop(\"disabled\", true);\r\n    $allowedCustomersField.closest(\".options_group\").hide();\r\n  } else {\r\n    $inside.addClass(\"disabled\");\r\n    $allowedCustomersField.closest(\".options_group\").show();\r\n    $allowedCustomersField.prop(\"disabled\", false);\r\n  }\r\n}\r\n","declare var jQuery: any;\r\n\r\nconst $ = jQuery;\r\n\r\n/**\r\n * Move exclude coupons field next to individual use only field.\r\n *\r\n * @since 2.7\r\n */\r\nexport default function initExcludeCouponField() {\r\n    const $excludeField = jQuery(\"p.acfw_exclude_coupons_field\");\r\n    const $wrapper = $excludeField.closest(\".options_group\");\r\n\r\n    $excludeField.insertAfter(\"p.form-field.individual_use_field\");\r\n    $wrapper.remove();\r\n}\r\n","declare var jQuery: any;\r\n\r\nconst $ = jQuery;\r\n\r\nexport default function advancedRestrictionsEvents() {\r\n  $(\"#woocommerce-coupon-data\").on(\r\n    \"change acfwp_load\",\r\n    \"#discount_type\",\r\n    togglePercentageDiscountCapField\r\n  );\r\n\r\n  $(\"#discount_type\").trigger(\"acfwp_load\");\r\n}\r\n\r\nfunction togglePercentageDiscountCapField() {\r\n  const $discountType = $(this);\r\n  const $discountCapField = $discountType\r\n    .closest(\".woocommerce_options_panel\")\r\n    .find(\"._acfw_percentage_discount_cap_field\");\r\n\r\n  if (\"percent\" === $discountType.val()) {\r\n    $discountCapField.addClass(\"show\");\r\n    $discountCapField.find(\"input\").prop(\"disabled\", false);\r\n  } else {\r\n    $discountCapField.removeClass(\"show\");\r\n    $discountCapField.find(\"input\").prop(\"disabled\", true);\r\n  }\r\n}\r\n","import \"./assets/styles/index.scss\";\r\nimport initialize_cart_conditions from \"./cart_conditions/index\";\r\nimport add_products_module_events from \"./add_products/index\";\r\nimport auto_apply_coupon_module_events from \"./auto_apply\";\r\nimport shipping_overrides_events from \"./shipping_overrides/index\";\r\nimport edit_link_scheduler_fields from \"./scheduler\";\r\nimport bogo_deals_events from \"./bogo_deals\";\r\nimport coupon_sort_events from \"./coupon_sort\";\r\nimport virtual_coupon_events from \"./virtual_coupons\";\r\nimport initExcludeCouponField from \"./excludeCoupon\";\r\nimport advancedRestrictionsEvents from \"./advanced_restrictions\";\r\n\r\ndeclare var jQuery: any;\r\ndeclare var acfw_edit_coupon: any;\r\n\r\nconst { modules } = acfw_edit_coupon;\r\n\r\njQuery(document).ready(($: any) => {\r\n  if (modules.indexOf(\"acfw_cart_conditions_module\") > -1)\r\n    initialize_cart_conditions();\r\n\r\n  if (modules.indexOf(\"acfw_add_free_products_module\") > -1)\r\n    add_products_module_events();\r\n\r\n  if (modules.indexOf(\"acfw_auto_apply_module\") > -1)\r\n    auto_apply_coupon_module_events();\r\n\r\n  if (modules.indexOf(\"acfw_shipping_overrides_module\") > -1)\r\n    shipping_overrides_events();\r\n\r\n  if (modules.indexOf(\"acfw_scheduler_module\") > -1)\r\n    edit_link_scheduler_fields();\r\n\r\n  if (modules.indexOf(\"acfw_bogo_deals_module\") > -1) bogo_deals_events();\r\n\r\n  if (modules.indexOf(\"acfw_sort_coupons_module\") > -1) coupon_sort_events();\r\n\r\n  if (modules.indexOf(\"acfw_virtual_coupons_module\") > -1)\r\n    virtual_coupon_events();\r\n\r\n  initExcludeCouponField();\r\n  advancedRestrictionsEvents();\r\n});\r\n"],"names":["toggle_overlay","overlay","type","display","jQuery","css","esc_attr","text","map","replace","m","remove_leading_zeros","decimal_separator","acfw_edit_coupon","$input","this","value","val","substring","array_to_select_options","options","key","label","option","toString","selected","value_1","value_2","condition_options","condition","condition_field_options","exactly","anyexcept","morethan","lessthan","price_to_float","price","parseFloat","isNaN","table_product_row_template","product","product_id","product_label","condition_label","quantity","JSON","stringify","table_placeholder_row_template","colspan","no_products_added","$","product_quantity","cart_condition_fields","template","data","add_product_label","title","product_col","condition_col","quantity_col","products_markup","exclude","length","push","scraper","condition_field","rows","querySelectorAll","products","forEach","r","customer_registration_date","desc","hours","parseInt","find","customer_last_ordered","total_customer_spend","offset","total_spend","days_offset","valueFloat","has_ordered_before","within_a_period","number_of_orders","num_prev_days","shipping_zone_region","zone_label","zone_placeholder","regions_label","regions_placeholder","zone_options","regionsJson","markup","zone_id","zone","name","get_zone_options","custom_taxonomy","qtyCondition","select_taxonomy","select_terms","quantityLabel","cart_quantity","condOption","terms","taxonomy","tax_options","tax_option","get_taxonomy_options","custom_user_meta","custom_cart_item_meta","condition_type","meta_key","meta_value","value_type","condition_type_class","type_options","get_type_options","condition_exists_field_option","exists","notexist","condition_exist_options","count_label","prev_days_label","initialize_cart_conditions","module_block","document","querySelector","default_data_value","template_callback","scraper_callback","on","validate_condition_value_based_on_type","hide_condition_value_field_for_exist_condition_type","$value","closest","number","Math","round","$condition","includes","prop","parent","hide","show","toggle_editing_mode","toggle","add_edit_row_template","discount_type","discount_value","product_table_buttons","edit","add","cancel","type_to_search","bogo_form_fields","get_option","btnText","show_nodiscount","currency_symbol","discount_field_options","nodiscount","override","percent","fixed","nodiscount_markup","discount_type_options","product_row_template","placeholder_table_row_template","trigger_add_table_row_form","$table","$tbody","remove","append","trigger","trigger_edit_table_row_form","$button","$row","splice","indexOf","replaceWith","add_edit_table_row","fill_form_propery_error_msg","$search","$quantity","discountType","discountValue","vex","dialog","alert","product_exists_in_table","cancel_add_edit_table_row","html","product_table_remove_product","$object_row","index","post_id","woocommerce_admin_meta_boxes","save_add_products_data","temp","post_status","product_rows","add_before_conditions","row","post","ajaxurl","action","coupon_id","is","response","status","Option","click","error_msg","console","log","addClass","clear_add_products_data","confirm","tbody","_wpnonce","save_on_coupon_publish","e","hasClass","preventDefault","setTimeout","removeClass","submit","add_products_module_events","disable_discount_value_for_nodiscount","height","init_add_products_data","ajaxComplete","listen_product_search_subscription_id_results","disallow_discount_options_for_subscription","$type","xhr","header","getResponseHeader","subIds","newIds","split","id","filter","i","self","$this","$product","productId","display_auto_apply_warning","$email_field","usage_limit","user_limit","$auto_apply","virtualCoupon","$warning","set_shipping_method_options","$select","$methods","z","methods","empty","method","placeholder_row_template","no_shipping_overrides_added","save_shipping_overrides","override_rows","overrides","clear_shipping_overrides","off","moduleBlock","shipping_zone","zoneMethods","zoneOptions","zm","zone_name","shipping_method","zoneData","get_options","table_row_template","object","selectedMethod","trigger_add_table_row","$zone","$firstOption","zone_select_first_option","add_edit_shipping_override","shipping_zone_already_added","shipZone","shipMethod","sm","remove_shipping_override_row","shipping_overrides_events","populate_saved_data","edit_link_scheduler_fields","scheduler_tab","toggleDayTimeFields","updateTimeMinMaxValues","validateTimeInputFields","toggleAvailableDayFields","validateBeforeSaveCoupon","flatpickr","allowInput","enableTime","noCalendar","altInput","altFormat","dateFormat","onOpen","selectedDates","dateStr","instance","defaultTime","Date","setHours","setMinutes","setDate","unsafeMessage","invalid_scheduler_time","$checkbox","$wrapper","$startTime","$endTime","endMinutes","getMinutesTotal","startMinutes","maxTime","getTimeFromMinutes","minTime","attr","$startDay","$endDay","availableDays","startDay","endDay","days","d","getDate","getDay","Set","getAvailableDaysFromRange","day","$fieldWrapper","time","n","minutes","hour","floor","minute","String","padStart","bogo_toggle_editing_mode","toggle_auto_add_products_field","$field","save_additional_settings","$deal_type","$auto_add_products","auto_add_products","disable_repeatedly_any_products_deal","$module","$onceOption","$repeatOption","triggerType","dealType","repeat_incompatible_notice","toggleCustomSortValueField","$customField","validateCustomSortValue","sortValue","coupon_sort_invalid","toggleVirtualCouponsFeature","$inside","$allowedCustomersField","togglePercentageDiscountCapField","$discountType","$discountCapField","modules","ready","$excludeField","bogo_deals_events","insertAfter"],"sourceRoot":""}